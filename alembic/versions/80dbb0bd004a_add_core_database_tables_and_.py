"""Add core database tables and relationships

Revision ID: 80dbb0bd004a
Revises: 6cd641b58ca2
Create Date: 2025-09-09 17:38:51.408727

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = '80dbb0bd004a'
down_revision = '6cd641b58ca2'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index('index_data_samples_on_data_set_id', table_name='data_samples')
    op.drop_index('index_data_samples_on_org_id_and_owner_id', table_name='data_samples')
    op.drop_index('index_data_samples_on_owner_id', table_name='data_samples')
    op.drop_table('data_samples')
    op.drop_index('index_data_sets_access_control_versions_on_item_type_and_item_id', table_name='data_sets_access_control_versions')
    op.drop_index('index_data_sets_access_control_versions_on_org_id', table_name='data_sets_access_control_versions')
    op.drop_index('index_data_sets_access_control_versions_on_user_id', table_name='data_sets_access_control_versions')
    op.drop_table('data_sets_access_control_versions')
    op.drop_index('index_invites_on_uid', table_name='invites')
    op.drop_table('invites')
    op.drop_index('index_cluster_endpoints_on_cluster_id', table_name='cluster_endpoints')
    op.drop_index('index_cluster_endpoints_on_service_and_cluster_id', table_name='cluster_endpoints')
    op.drop_table('cluster_endpoints')
    op.drop_index('index_data_sink_versions_on_item_type_and_item_id', table_name='data_sink_versions')
    op.drop_index('index_data_sink_versions_on_org_id', table_name='data_sink_versions')
    op.drop_index('index_data_sink_versions_on_user_id', table_name='data_sink_versions')
    op.drop_index('item_id_created_at', table_name='data_sink_versions')
    op.drop_table('data_sink_versions')
    op.drop_index('index_projects_data_flows_on_project_id', table_name='projects_data_flows')
    op.drop_table('projects_data_flows')
    op.drop_index('index_runtimes_on_owner_id', table_name='runtimes')
    op.drop_table('runtimes')
    op.drop_index('idx_data_sinks_aclv_item_type_item_id', table_name='data_sinks_access_control_versions')
    op.drop_index('idx_data_sinks_aclv_org_id', table_name='data_sinks_access_control_versions')
    op.drop_index('idx_data_sinks_aclv_user_id', table_name='data_sinks_access_control_versions')
    op.drop_table('data_sinks_access_control_versions')
    op.drop_index('idx_data_sources_run_ids_created_at', table_name='data_sources_run_ids')
    op.drop_index('idx_data_sources_run_ids_data_source_id_created_at', table_name='data_sources_run_ids')
    op.drop_index('index_data_sources_run_ids_on_data_source_id', table_name='data_sources_run_ids')
    op.drop_table('data_sources_run_ids')
    op.drop_index('index_catalog_configs_on_org_id', table_name='catalog_configs')
    op.drop_index('index_catalog_configs_on_owner_id', table_name='catalog_configs')
    op.drop_table('catalog_configs')
    op.drop_index('index_teams_on_owner_id', table_name='teams')
    op.drop_table('teams')
    op.drop_index('index_orgs_doc_containers_on_doc_container_id', table_name='orgs_doc_containers')
    op.drop_index('index_orgs_doc_containers_on_org_id', table_name='orgs_doc_containers')
    op.drop_table('orgs_doc_containers')
    op.drop_table('notification_types')
    op.drop_index('index_self_signup_request_versions_on_item_type_and_item_id', table_name='self_signup_request_versions')
    op.drop_index('index_self_signup_request_versions_on_org_id', table_name='self_signup_request_versions')
    op.drop_index('index_self_signup_request_versions_on_user_id', table_name='self_signup_request_versions')
    op.drop_table('self_signup_request_versions')
    op.drop_index('idx_quarantine_settings_access_controls_accessor_role', table_name='quarantine_settings_access_controls')
    op.drop_table('quarantine_settings_access_controls')
    op.drop_index('index_versions_on_item_type_and_item_id', table_name='versions')
    op.drop_index('index_versions_on_org_id', table_name='versions')
    op.drop_index('index_versions_on_user_id', table_name='versions')
    op.drop_table('versions')
    op.drop_table('marketplace_items')
    op.drop_index('index_auth_parameter_versions_on_item_type_and_item_id', table_name='auth_parameter_versions')
    op.drop_index('index_auth_parameter_versions_on_org_id', table_name='auth_parameter_versions')
    op.drop_index('index_auth_parameter_versions_on_user_id', table_name='auth_parameter_versions')
    op.drop_table('auth_parameter_versions')
    op.drop_index('data_sinks_acl_accessor_id_type_roles', table_name='data_sinks_access_controls')
    op.drop_index('idx_data_sinks_access_controls_accessor_role', table_name='data_sinks_access_controls')
    op.drop_index('index_data_sinks_access_controls_on_data_sink_id', table_name='data_sinks_access_controls')
    op.drop_table('data_sinks_access_controls')
    op.drop_index('index_tags_on_name', table_name='tags')
    op.drop_table('tags')
    op.drop_index('index_data_credentials_groups_on_name', table_name='data_credentials_groups')
    op.drop_index('index_data_credentials_groups_on_org_id', table_name='data_credentials_groups')
    op.drop_index('index_data_credentials_groups_on_owner_id', table_name='data_credentials_groups')
    op.drop_table('data_credentials_groups')
    op.drop_index('idx_flow_link_versions_item_type_item_id', table_name='flow_link_versions')
    op.drop_index('index_flow_link_versions_on_org_id', table_name='flow_link_versions')
    op.drop_index('index_flow_link_versions_on_user_id', table_name='flow_link_versions')
    op.drop_table('flow_link_versions')
    op.drop_index('index_custom_data_flows_on_owner_id', table_name='custom_data_flows')
    op.drop_table('custom_data_flows')
    op.drop_index('index_data_credentials_versions_on_item_type_and_item_id', table_name='data_credentials_versions')
    op.drop_index('index_data_credentials_versions_on_org_id', table_name='data_credentials_versions')
    op.drop_index('index_data_credentials_versions_on_user_id', table_name='data_credentials_versions')
    op.drop_index('item_id_created_at', table_name='data_credentials_versions')
    op.drop_table('data_credentials_versions')
    op.drop_index('index_vendor_endpoint_versions_on_item_type_and_item_id', table_name='vendor_endpoint_versions')
    op.drop_index('index_vendor_endpoint_versions_on_org_id', table_name='vendor_endpoint_versions')
    op.drop_index('index_vendor_endpoint_versions_on_user_id', table_name='vendor_endpoint_versions')
    op.drop_table('vendor_endpoint_versions')
    op.drop_index('index_flow_node_versions_on_item_type_and_item_id', table_name='flow_node_versions')
    op.drop_index('index_flow_node_versions_on_org_id', table_name='flow_node_versions')
    op.drop_index('index_flow_node_versions_on_user_id', table_name='flow_node_versions')
    op.drop_table('flow_node_versions')
    op.drop_index('index_user_settings_types_on_name', table_name='user_settings_types')
    op.drop_table('user_settings_types')
    op.drop_index('index_data_sinks_doc_containers_on_data_sink_id', table_name='data_sinks_doc_containers')
    op.drop_index('index_data_sinks_doc_containers_on_doc_container_id', table_name='data_sinks_doc_containers')
    op.drop_table('data_sinks_doc_containers')
    op.drop_index('idx_notifications_access_controls_accessor_role', table_name='notifications_access_controls')
    op.drop_index('index_notifications_access_controls_on_notification_id', table_name='notifications_access_controls')
    op.drop_table('notifications_access_controls')
    op.drop_index('idx_data_schemas_aclv_item_type_item_id', table_name='data_schemas_access_control_versions')
    op.drop_index('idx_data_schemas_aclv_org_id', table_name='data_schemas_access_control_versions')
    op.drop_index('idx_data_schemas_aclv_user_id', table_name='data_schemas_access_control_versions')
    op.drop_table('data_schemas_access_control_versions')
    op.drop_index('data_sources_acl_accessor_id_type_roles', table_name='data_sources_access_controls')
    op.drop_index('idx_data_sources_access_controls_accessor_role', table_name='data_sources_access_controls')
    op.drop_index('index_data_sources_access_controls_on_data_source_id', table_name='data_sources_access_controls')
    op.drop_table('data_sources_access_controls')
    op.drop_index('index_data_schemas_doc_containers_on_data_schema_id', table_name='data_schemas_doc_containers')
    op.drop_index('index_data_schemas_doc_containers_on_doc_container_id', table_name='data_schemas_doc_containers')
    op.drop_table('data_schemas_doc_containers')
    op.drop_index('index_code_filters_on_code_type', table_name='code_filters')
    op.drop_index('index_code_filters_on_owner_id', table_name='code_filters')
    op.drop_table('code_filters')
    op.drop_index('index_org_additional_infos_on_org_id', table_name='org_additional_infos')
    op.drop_index('index_org_additional_infos_on_self_signup_request_id', table_name='org_additional_infos')
    op.drop_table('org_additional_infos')
    op.drop_index('index_data_source_versions_on_item_type_and_item_id', table_name='data_source_versions')
    op.drop_index('index_data_source_versions_on_org_id', table_name='data_source_versions')
    op.drop_index('index_data_source_versions_on_user_id', table_name='data_source_versions')
    op.drop_index('item_id_created_at', table_name='data_source_versions')
    op.drop_table('data_source_versions')
    op.drop_index('index_data_sets_parent_data_sets_on_data_set_id', table_name='data_sets_parent_data_sets')
    op.drop_table('data_sets_parent_data_sets')
    op.drop_index('index_team_versions_on_item_type_and_item_id', table_name='team_versions')
    op.drop_index('index_team_versions_on_org_id', table_name='team_versions')
    op.drop_index('index_team_versions_on_user_id', table_name='team_versions')
    op.drop_table('team_versions')
    op.drop_index('index_org_custodians_on_org_id', table_name='org_custodians')
    op.drop_index('index_org_custodians_on_user_id', table_name='org_custodians')
    op.drop_table('org_custodians')
    op.drop_index('index_flow_link_types_on_type', table_name='flow_link_types')
    op.drop_table('flow_link_types')
    op.drop_index('index_endpoint_mappings_on_data_set_id', table_name='endpoint_mappings')
    op.drop_index('index_endpoint_mappings_on_data_source_id', table_name='endpoint_mappings')
    op.drop_index('index_endpoint_mappings_on_name', table_name='endpoint_mappings')
    op.drop_table('endpoint_mappings')
    op.drop_index('index_project_versions_on_item_type_and_item_id', table_name='project_versions')
    op.drop_index('index_project_versions_on_org_id', table_name='project_versions')
    op.drop_index('index_project_versions_on_user_id', table_name='project_versions')
    op.drop_table('project_versions')
    op.drop_index('index_cluster_versions_on_item_type_and_item_id', table_name='cluster_versions')
    op.drop_index('index_cluster_versions_on_org_id', table_name='cluster_versions')
    op.drop_index('index_cluster_versions_on_user_id', table_name='cluster_versions')
    op.drop_table('cluster_versions')
    op.drop_index('index_data_sources_doc_containers_on_data_source_id', table_name='data_sources_doc_containers')
    op.drop_index('index_data_sources_doc_containers_on_doc_container_id', table_name='data_sources_doc_containers')
    op.drop_table('data_sources_doc_containers')
    op.drop_index('index_catalog_config_versions_on_item_type_and_item_id', table_name='catalog_config_versions')
    op.drop_index('index_catalog_config_versions_on_org_id', table_name='catalog_config_versions')
    op.drop_index('index_catalog_config_versions_on_user_id', table_name='catalog_config_versions')
    op.drop_table('catalog_config_versions')
    op.drop_index('index_vendors_doc_containers_on_doc_container_id', table_name='vendors_doc_containers')
    op.drop_index('index_vendors_doc_containers_on_vendor_id', table_name='vendors_doc_containers')
    op.drop_table('vendors_doc_containers')
    op.drop_index('index_flow_links_on_left_origin_node_id', table_name='flow_links')
    op.drop_index('index_flow_links_on_link_type', table_name='flow_links')
    op.drop_index('index_flow_links_on_owner_id', table_name='flow_links')
    op.drop_index('index_flow_links_on_retriever_data_set_id', table_name='flow_links')
    op.drop_index('index_flow_links_on_right_origin_node_id', table_name='flow_links')
    op.drop_table('flow_links')
    op.drop_table('self_signup_blocked_domains')
    op.drop_index('idx_projects_aclv_item_type_item_id', table_name='projects_access_control_versions')
    op.drop_index('idx_projects_aclv_org_id', table_name='projects_access_control_versions')
    op.drop_index('idx_projects_aclv_user_id', table_name='projects_access_control_versions')
    op.drop_table('projects_access_control_versions')
    op.drop_index('index_projects_doc_containers_on_doc_container_id', table_name='projects_doc_containers')
    op.drop_index('index_projects_doc_containers_on_project_id', table_name='projects_doc_containers')
    op.drop_table('projects_doc_containers')
    op.drop_index('data_credentials_acl_accessor_id_type_roles', table_name='data_credentials_access_controls')
    op.drop_index('idx_data_credentials_access_controls_accessor_role', table_name='data_credentials_access_controls')
    op.drop_index('index_data_credentials_access_controls_on_data_credentials_id', table_name='data_credentials_access_controls')
    op.drop_table('data_credentials_access_controls')
    op.drop_index('idx_data_flows_access_controls_accessor_role', table_name='data_flows_access_controls')
    op.drop_table('data_flows_access_controls')
    op.drop_index('index_data_schema_versions_on_item_type_and_item_id', table_name='data_schema_versions')
    op.drop_index('index_data_schema_versions_on_org_id', table_name='data_schema_versions')
    op.drop_index('index_data_schema_versions_on_user_id', table_name='data_schema_versions')
    op.drop_table('data_schema_versions')
    op.drop_index('index_user_login_audits_on_org_id', table_name='user_login_audits')
    op.drop_index('index_user_login_audits_on_user_id', table_name='user_login_audits')
    op.drop_table('user_login_audits')
    op.drop_index('index_marketplace_item_versions_on_item_type_and_item_id', table_name='marketplace_item_versions')
    op.drop_index('index_marketplace_item_versions_on_org_id', table_name='marketplace_item_versions')
    op.drop_index('index_marketplace_item_versions_on_user_id', table_name='marketplace_item_versions')
    op.drop_table('marketplace_item_versions')
    op.drop_index('idx_data_flows_aclv_item_type_item_id', table_name='data_flows_access_control_versions')
    op.drop_index('idx_data_flows_aclv_org_id', table_name='data_flows_access_control_versions')
    op.drop_index('idx_data_flows_aclv_user_id', table_name='data_flows_access_control_versions')
    op.drop_table('data_flows_access_control_versions')
    op.drop_index('index_domain_custodian_versions_on_item_type_and_item_id', table_name='domain_custodian_versions')
    op.drop_index('index_domain_custodian_versions_on_org_id', table_name='domain_custodian_versions')
    op.drop_index('index_domain_custodian_versions_on_user_id', table_name='domain_custodian_versions')
    op.drop_table('domain_custodian_versions')
    op.drop_index('idx_doc_containers_aclv_item_type_item_id', table_name='doc_containers_access_control_versions')
    op.drop_index('idx_doc_containers_aclv_org_id', table_name='doc_containers_access_control_versions')
    op.drop_index('idx_doc_containers_aclv_user_id', table_name='doc_containers_access_control_versions')
    op.drop_table('doc_containers_access_control_versions')
    op.drop_index('index_resources_references_on_hibryd', table_name='resources_references')
    op.drop_index('index_resources_references_on_org_id', table_name='resources_references')
    op.drop_index('index_resources_references_on_referenced', table_name='resources_references')
    op.drop_table('resources_references')
    op.drop_index('idx_orgs_aclv_item_type_item_id', table_name='orgs_access_control_versions')
    op.drop_index('idx_orgs_aclv_org_id', table_name='orgs_access_control_versions')
    op.drop_index('idx_orgs_aclv_user_id', table_name='orgs_access_control_versions')
    op.drop_table('orgs_access_control_versions')
    op.drop_table('gen_ai_org_settings')
    op.drop_index('index_code_filter_versions_on_item_type_and_item_id', table_name='code_filter_versions')
    op.drop_index('index_code_filter_versions_on_org_id', table_name='code_filter_versions')
    op.drop_index('index_code_filter_versions_on_user_id', table_name='code_filter_versions')
    op.drop_table('code_filter_versions')
    op.drop_index('index_domain_marketplace_item_versions_on_item_type_and_item_id', table_name='domain_marketplace_item_versions')
    op.drop_index('index_domain_marketplace_item_versions_on_org_id', table_name='domain_marketplace_item_versions')
    op.drop_index('index_domain_marketplace_item_versions_on_user_id', table_name='domain_marketplace_item_versions')
    op.drop_table('domain_marketplace_item_versions')
    op.drop_index('index_domain_custodians_on_domain_id', table_name='domain_custodians')
    op.drop_index('index_domain_custodians_on_org_id', table_name='domain_custodians')
    op.drop_index('index_domain_custodians_on_user_id', table_name='domain_custodians')
    op.drop_table('domain_custodians')
    op.drop_index('index_vendor_versions_on_item_type_and_item_id', table_name='vendor_versions')
    op.drop_index('index_vendor_versions_on_org_id', table_name='vendor_versions')
    op.drop_index('index_vendor_versions_on_user_id', table_name='vendor_versions')
    op.drop_table('vendor_versions')
    op.drop_index('index_catalog_configs_doc_containers_on_catalog_config_id', table_name='catalog_configs_doc_containers')
    op.drop_index('index_catalog_configs_doc_containers_on_doc_container_id', table_name='catalog_configs_doc_containers')
    op.drop_table('catalog_configs_doc_containers')
    op.drop_index('idx_endpoint_spec_versions_item_type_item_id', table_name='endpoint_spec_versions')
    op.drop_index('index_endpoint_spec_versions_on_org_id', table_name='endpoint_spec_versions')
    op.drop_index('index_endpoint_spec_versions_on_user_id', table_name='endpoint_spec_versions')
    op.drop_table('endpoint_spec_versions')
    op.drop_index('idx_quarantine_settings_aclv_item_type_item_id', table_name='quarantine_settings_access_control_versions')
    op.drop_index('idx_quarantine_settings_aclv_org_id', table_name='quarantine_settings_access_control_versions')
    op.drop_index('idx_quarantine_settings_aclv_user_id', table_name='quarantine_settings_access_control_versions')
    op.drop_table('quarantine_settings_access_control_versions')
    op.drop_index('idx_doc_containers_access_controls_accessor_role', table_name='doc_containers_access_controls')
    op.drop_index('index_doc_containers_access_controls_on_doc_container_id', table_name='doc_containers_access_controls')
    op.drop_table('doc_containers_access_controls')
    op.drop_index('index_flow_triggers_on_owner_id', table_name='flow_triggers')
    op.drop_index('index_flow_triggers_on_triggered_event_type', table_name='flow_triggers')
    op.drop_index('index_flow_triggers_on_triggered_origin_node_id', table_name='flow_triggers')
    op.drop_index('index_flow_triggers_on_triggering_event_type', table_name='flow_triggers')
    op.drop_index('index_flow_triggers_on_triggering_flow_node_id', table_name='flow_triggers')
    op.drop_table('flow_triggers')
    op.drop_index('index_org_tier_versions_on_item_type_and_item_id', table_name='org_tier_versions')
    op.drop_index('index_org_tier_versions_on_org_id', table_name='org_tier_versions')
    op.drop_index('index_org_tier_versions_on_user_id', table_name='org_tier_versions')
    op.drop_table('org_tier_versions')
    op.drop_index('index_api_auth_configs_on_org_id', table_name='api_auth_configs')
    op.drop_index('index_api_auth_configs_on_owner_id', table_name='api_auth_configs')
    op.drop_index('index_api_auth_configs_on_secret_config_enc_iv', table_name='api_auth_configs')
    op.drop_index('index_api_auth_configs_on_uid', table_name='api_auth_configs')
    op.drop_table('api_auth_configs')
    op.drop_index('index_data_sinks_api_keys_on_api_key', table_name='data_sinks_api_keys')
    op.drop_index('index_data_sinks_api_keys_on_data_sink_id', table_name='data_sinks_api_keys')
    op.drop_index('index_data_sinks_api_keys_on_owner_id', table_name='data_sinks_api_keys')
    op.drop_table('data_sinks_api_keys')
    op.drop_index('idx_gen_ai_org_setting_versions_item_type_item_id', table_name='gen_ai_org_setting_versions')
    op.drop_index('index_gen_ai_org_setting_versions_on_org_id', table_name='gen_ai_org_setting_versions')
    op.drop_index('index_gen_ai_org_setting_versions_on_user_id', table_name='gen_ai_org_setting_versions')
    op.drop_table('gen_ai_org_setting_versions')
    op.drop_index('index_service_key_versions_on_item_type_and_item_id', table_name='service_key_versions')
    op.drop_index('index_service_key_versions_on_org_id', table_name='service_key_versions')
    op.drop_index('index_service_key_versions_on_user_id', table_name='service_key_versions')
    op.drop_table('service_key_versions')
    op.drop_index('index_doc_containers_on_owner_id', table_name='doc_containers')
    op.drop_table('doc_containers')
    op.drop_index('index_data_set_versions_on_item_type_and_item_id', table_name='data_set_versions')
    op.drop_index('index_data_set_versions_on_org_id', table_name='data_set_versions')
    op.drop_index('index_data_set_versions_on_user_id', table_name='data_set_versions')
    op.drop_index('item_id_created_at', table_name='data_set_versions')
    op.drop_table('data_set_versions')
    op.drop_index('index_user_settings_on_owner_id', table_name='user_settings')
    op.drop_index('index_user_settings_on_primary_key_value', table_name='user_settings')
    op.drop_index('index_user_settings_on_user_settings_type_id', table_name='user_settings')
    op.drop_table('user_settings')
    op.drop_index('index_org_custodian_versions_on_item_type_and_item_id', table_name='org_custodian_versions')
    op.drop_index('index_org_custodian_versions_on_org_id', table_name='org_custodian_versions')
    op.drop_index('index_org_custodian_versions_on_user_id', table_name='org_custodian_versions')
    op.drop_table('org_custodian_versions')
    op.drop_index('index_api_cronjobs_on_descriptor', table_name='api_cronjobs')
    op.drop_table('api_cronjobs')
    op.drop_index('index_data_sets_doc_containers_on_data_set_id', table_name='data_sets_doc_containers')
    op.drop_index('index_data_sets_doc_containers_on_doc_container_id', table_name='data_sets_doc_containers')
    op.drop_table('data_sets_doc_containers')
    op.drop_index('idx_projects_access_controls_accessor_role', table_name='projects_access_controls')
    op.drop_index('index_projects_access_controls_on_project_id', table_name='projects_access_controls')
    op.drop_table('projects_access_controls')
    op.drop_index('index_data_map_versions_on_item_type_and_item_id', table_name='data_map_versions')
    op.drop_index('index_data_map_versions_on_org_id', table_name='data_map_versions')
    op.drop_index('index_data_map_versions_on_user_id', table_name='data_map_versions')
    op.drop_table('data_map_versions')
    op.drop_index('idx_code_containers_access_controls_accessor_role', table_name='code_containers_access_controls')
    op.drop_index('index_code_containers_access_controls_on_code_container_id', table_name='code_containers_access_controls')
    op.drop_table('code_containers_access_controls')
    op.drop_table('vendor_endpoints')
    op.drop_index('index_doc_container_versions_on_item_type_and_item_id', table_name='doc_container_versions')
    op.drop_index('index_doc_container_versions_on_org_id', table_name='doc_container_versions')
    op.drop_index('index_doc_container_versions_on_user_id', table_name='doc_container_versions')
    op.drop_table('doc_container_versions')
    op.drop_index('index_data_sinks_api_key_versions_on_item_type_and_item_id', table_name='data_sinks_api_key_versions')
    op.drop_index('index_data_sinks_api_key_versions_on_org_id', table_name='data_sinks_api_key_versions')
    op.drop_index('index_data_sinks_api_key_versions_on_user_id', table_name='data_sinks_api_key_versions')
    op.drop_table('data_sinks_api_key_versions')
    op.drop_index('index_custom_data_flows_doc_containers_on_custom_data_flow_id', table_name='custom_data_flows_doc_containers')
    op.drop_index('index_custom_data_flows_doc_containers_on_doc_container_id', table_name='custom_data_flows_doc_containers')
    op.drop_table('custom_data_flows_doc_containers')
    op.drop_index('index_external_sharers_on_data_set_id', table_name='external_sharers')
    op.drop_index('index_external_sharers_on_email', table_name='external_sharers')
    op.drop_table('external_sharers')
    op.drop_table('auth_parameters')
    op.drop_index('index_domain_versions_on_item_type_and_item_id', table_name='domain_versions')
    op.drop_index('index_domain_versions_on_org_id', table_name='domain_versions')
    op.drop_index('index_domain_versions_on_user_id', table_name='domain_versions')
    op.drop_table('domain_versions')
    op.drop_index('index_service_keys_on_api_key', table_name='service_keys')
    op.drop_index('index_service_keys_on_data_source_id', table_name='service_keys')
    op.drop_index('index_service_keys_on_external_id', table_name='service_keys')
    op.drop_index('index_service_keys_on_org_id', table_name='service_keys')
    op.drop_index('index_service_keys_on_owner_id', table_name='service_keys')
    op.drop_index('index_service_keys_on_owner_id_and_org_id', table_name='service_keys')
    op.drop_index('index_service_keys_on_user_id', table_name='service_keys')
    op.drop_table('service_keys')
    op.drop_index('index_data_sets_api_keys_on_api_key', table_name='data_sets_api_keys')
    op.drop_index('index_data_sets_api_keys_on_data_set_id', table_name='data_sets_api_keys')
    op.drop_index('index_data_sets_api_keys_on_owner_id', table_name='data_sets_api_keys')
    op.drop_table('data_sets_api_keys')
    op.drop_index('index_endpoint_specs_on_data_set_id', table_name='endpoint_specs')
    op.drop_index('index_endpoint_specs_on_org_id', table_name='endpoint_specs')
    op.drop_index('index_endpoint_specs_on_owner_id', table_name='endpoint_specs')
    op.drop_table('endpoint_specs')
    op.drop_index('idx_teams_aclv_item_type_item_id', table_name='teams_access_control_versions')
    op.drop_index('idx_teams_aclv_org_id', table_name='teams_access_control_versions')
    op.drop_index('idx_teams_aclv_user_id', table_name='teams_access_control_versions')
    op.drop_table('teams_access_control_versions')
    op.drop_index('index_code_containers_doc_containers_on_code_container_id', table_name='code_containers_doc_containers')
    op.drop_index('index_code_containers_doc_containers_on_doc_container_id', table_name='code_containers_doc_containers')
    op.drop_table('code_containers_doc_containers')
    op.drop_index('idx_data_credentials_groups_aclv_item_type_item_id', table_name='data_credentials_groups_access_control_versions')
    op.drop_index('idx_data_credentials_groups_aclv_org_id', table_name='data_credentials_groups_access_control_versions')
    op.drop_index('idx_data_credentials_groups_aclv_user_id', table_name='data_credentials_groups_access_control_versions')
    op.drop_table('data_credentials_groups_access_control_versions')
    op.drop_table('approval_steps')
    op.drop_index('index_data_sources_api_keys_on_api_key', table_name='data_sources_api_keys')
    op.drop_index('index_data_sources_api_keys_on_data_source_id', table_name='data_sources_api_keys')
    op.drop_index('index_data_sources_api_keys_on_owner_id', table_name='data_sources_api_keys')
    op.drop_table('data_sources_api_keys')
    op.drop_index('idx_runtime_versions_item_type_item_id', table_name='runtime_versions')
    op.drop_index('index_runtime_versions_on_org_id', table_name='runtime_versions')
    op.drop_index('index_runtime_versions_on_user_id', table_name='runtime_versions')
    op.drop_table('runtime_versions')
    op.drop_index('index_teams_doc_containers_on_doc_container_id', table_name='teams_doc_containers')
    op.drop_index('index_teams_doc_containers_on_team_id', table_name='teams_doc_containers')
    op.drop_table('teams_doc_containers')
    op.drop_index('index_resource_parameter_versions_on_item_type_and_item_id', table_name='resource_parameter_versions')
    op.drop_index('index_resource_parameter_versions_on_org_id', table_name='resource_parameter_versions')
    op.drop_index('index_resource_parameter_versions_on_user_id', table_name='resource_parameter_versions')
    op.drop_table('resource_parameter_versions')
    op.drop_index('idx_notifications_aclv_item_type_item_id', table_name='notifications_access_control_versions')
    op.drop_index('idx_notifications_aclv_org_id', table_name='notifications_access_control_versions')
    op.drop_index('idx_notifications_aclv_user_id', table_name='notifications_access_control_versions')
    op.drop_table('notifications_access_control_versions')
    op.drop_index('idx_flow_nodes_aclv_item_type_item_id', table_name='flow_nodes_access_control_versions')
    op.drop_index('idx_flow_nodes_aclv_org_id', table_name='flow_nodes_access_control_versions')
    op.drop_index('idx_flow_nodes_aclv_user_id', table_name='flow_nodes_access_control_versions')
    op.drop_table('flow_nodes_access_control_versions')
    op.drop_index('idx_code_containers_aclv_item_type_item_id', table_name='code_containers_access_control_versions')
    op.drop_index('idx_code_containers_aclv_org_id', table_name='code_containers_access_control_versions')
    op.drop_index('idx_code_containers_aclv_user_id', table_name='code_containers_access_control_versions')
    op.drop_table('code_containers_access_control_versions')
    op.drop_index('idx_notification_channel_settings_aclv_item_type_item_id', table_name='notification_channel_settings_access_control_versions')
    op.drop_index('idx_notification_channel_settings_aclv_org_id', table_name='notification_channel_settings_access_control_versions')
    op.drop_index('idx_notification_channel_settings_aclv_user_id', table_name='notification_channel_settings_access_control_versions')
    op.drop_table('notification_channel_settings_access_control_versions')
    op.drop_index('index_quarantine_settings_on_owner_id', table_name='quarantine_settings')
    op.drop_index('quarantine_settings_res_id_type_org_id', table_name='quarantine_settings')
    op.drop_index('quarantine_settings_resource_id', table_name='quarantine_settings')
    op.drop_index('quarantine_settings_resource_type', table_name='quarantine_settings')
    op.drop_table('quarantine_settings')
    op.drop_index('index_async_task_versions_on_item_type_and_item_id', table_name='async_task_versions')
    op.drop_index('index_async_task_versions_on_org_id', table_name='async_task_versions')
    op.drop_index('index_async_task_versions_on_user_id', table_name='async_task_versions')
    op.drop_table('async_task_versions')
    op.drop_index('idx_custom_data_flows_aclv_item_type_item_id', table_name='custom_data_flows_access_control_versions')
    op.drop_index('idx_custom_data_flows_aclv_org_id', table_name='custom_data_flows_access_control_versions')
    op.drop_index('idx_custom_data_flows_aclv_user_id', table_name='custom_data_flows_access_control_versions')
    op.drop_table('custom_data_flows_access_control_versions')
    op.drop_table('ar_internal_metadata')
    op.drop_index('index_api_key_events_on_org_id', table_name='api_key_events')
    op.drop_index('index_api_key_events_on_owner_id', table_name='api_key_events')
    op.drop_table('api_key_events')
    op.drop_index('data_maps_acl_accessor_id_type_roles', table_name='data_maps_access_controls')
    op.drop_index('idx_data_maps_access_controls_accessor_role', table_name='data_maps_access_controls')
    op.drop_index('index_data_maps_access_controls_on_data_map_id', table_name='data_maps_access_controls')
    op.drop_table('data_maps_access_controls')
    op.drop_index('index_code_containers_on_owner_id', table_name='code_containers')
    op.drop_table('code_containers')
    op.drop_index('index_data_maps_doc_containers_on_data_map_id', table_name='data_maps_doc_containers')
    op.drop_index('index_data_maps_doc_containers_on_doc_container_id', table_name='data_maps_doc_containers')
    op.drop_table('data_maps_doc_containers')
    op.drop_index('index_resources_references_origins_on_origin', table_name='resources_references_origins')
    op.drop_table('resources_references_origins')
    op.drop_index('index_domains_on_parent_id', table_name='domains')
    op.drop_table('domains')
    op.drop_table('approval_requests')
    op.drop_index('credentials_groups_access_control_index', table_name='data_credentials_groups_access_controls')
    op.drop_table('data_credentials_groups_access_controls')
    op.drop_index('index_notification_channel_settings_on_owner_id', table_name='notification_channel_settings')
    op.drop_table('notification_channel_settings')
    op.drop_index('index_users_api_key_versions_on_item_type_and_item_id', table_name='users_api_key_versions')
    op.drop_index('index_users_api_key_versions_on_org_id', table_name='users_api_key_versions')
    op.drop_index('index_users_api_key_versions_on_user_id', table_name='users_api_key_versions')
    op.drop_table('users_api_key_versions')
    op.drop_index('index_gen_ai_configs_on_data_credentials_id', table_name='gen_ai_configs')
    op.drop_index('index_gen_ai_configs_on_org_id', table_name='gen_ai_configs')
    op.drop_index('index_gen_ai_configs_on_owner_id', table_name='gen_ai_configs')
    op.drop_table('gen_ai_configs')
    op.drop_index('index_taggings_on_context', table_name='taggings')
    op.drop_index('index_taggings_on_tag_id', table_name='taggings')
    op.drop_index('index_taggings_on_taggable_id', table_name='taggings')
    op.drop_index('index_taggings_on_taggable_id_and_taggable_type_and_context', table_name='taggings')
    op.drop_index('index_taggings_on_taggable_type', table_name='taggings')
    op.drop_index('index_taggings_on_tagger_id', table_name='taggings')
    op.drop_index('index_taggings_on_tagger_id_and_tagger_type', table_name='taggings')
    op.drop_index('taggings_idx', table_name='taggings')
    op.drop_index('taggings_idy', table_name='taggings')
    op.drop_table('taggings')
    op.drop_index('idx_orgs_access_controls_accessor_role', table_name='orgs_access_controls')
    op.drop_index('index_orgs_access_controls_on_org_id', table_name='orgs_access_controls')
    op.drop_index('orgs_acl_accessor_id_type_roles', table_name='orgs_access_controls')
    op.drop_table('orgs_access_controls')
    op.drop_index('idx_dashboard_transforms_access_controls_accessor_role', table_name='dashboard_transforms_access_controls')
    op.drop_table('dashboard_transforms_access_controls')
    op.drop_index('index_cluster_endpoint_versions_on_item_type_and_item_id', table_name='cluster_endpoint_versions')
    op.drop_index('index_cluster_endpoint_versions_on_org_id', table_name='cluster_endpoint_versions')
    op.drop_index('index_cluster_endpoint_versions_on_user_id', table_name='cluster_endpoint_versions')
    op.drop_table('cluster_endpoint_versions')
    op.drop_index('index_self_signup_requests_on_email_verification_token', table_name='self_signup_requests')
    op.drop_table('self_signup_requests')
    op.drop_index('index_users_api_keys_on_api_key', table_name='users_api_keys')
    op.drop_index('index_users_api_keys_on_owner_id', table_name='users_api_keys')
    op.drop_index('index_users_api_keys_on_user_id', table_name='users_api_keys')
    op.drop_table('users_api_keys')
    op.drop_index('index_orchestration_event_types_on_type', table_name='orchestration_event_types')
    op.drop_table('orchestration_event_types')
    op.drop_index('idx_notification_settings_access_controls_accessor_role', table_name='notification_settings_access_controls')
    op.drop_index('notification_settings_acl_accessor_id_type_roles', table_name='notification_settings_access_controls')
    op.drop_table('notification_settings_access_controls')
    op.drop_index('idx_teams_access_controls_accessor_role', table_name='teams_access_controls')
    op.drop_index('index_teams_access_controls_on_team_id', table_name='teams_access_controls')
    op.drop_index('teams_acl_accessor_id_type_roles', table_name='teams_access_controls')
    op.drop_table('teams_access_controls')
    op.drop_index('data_sets_acl_accessor_id_type_roles', table_name='data_sets_access_controls')
    op.drop_index('idx_data_sets_access_controls_accessor_role', table_name='data_sets_access_controls')
    op.drop_index('index_data_sets_access_controls_on_data_set_id', table_name='data_sets_access_controls')
    op.drop_table('data_sets_access_controls')
    op.drop_index('index_team_memberships_on_team_id', table_name='team_memberships')
    op.drop_index('index_team_memberships_on_user_id', table_name='team_memberships')
    op.drop_table('team_memberships')
    op.drop_index('index_data_maps_on_owner_id', table_name='data_maps')
    op.drop_table('data_maps')
    op.drop_index('async_task_idx1', table_name='async_tasks')
    op.drop_index('async_task_idx2', table_name='async_tasks')
    op.drop_table('async_tasks')
    op.drop_index('index_flow_nodes_doc_containers_on_doc_container_id', table_name='flow_nodes_doc_containers')
    op.drop_index('index_flow_nodes_doc_containers_on_flow_node_id', table_name='flow_nodes_doc_containers')
    op.drop_table('flow_nodes_doc_containers')
    op.drop_index('index_gen_ai_config_versions_on_item_type_and_item_id', table_name='gen_ai_config_versions')
    op.drop_index('index_gen_ai_config_versions_on_org_id', table_name='gen_ai_config_versions')
    op.drop_index('index_gen_ai_config_versions_on_user_id', table_name='gen_ai_config_versions')
    op.drop_table('gen_ai_config_versions')
    op.drop_index('index_data_sets_catalog_refs_on_catalog_config_id', table_name='data_sets_catalog_refs')
    op.drop_index('index_data_sets_catalog_refs_on_data_set_id', table_name='data_sets_catalog_refs')
    op.drop_table('data_sets_catalog_refs')
    op.drop_index('idx_notifications_res_id', table_name='notifications')
    op.drop_index('idx_notifications_res_id_type', table_name='notifications')
    op.drop_index('idx_notifications_res_id_type_updated', table_name='notifications')
    op.drop_index('idx_notifications_res_type', table_name='notifications')
    op.drop_index('idx_notifications_sort_created_at', table_name='notifications')
    op.drop_index('idx_notifications_sort_timestamp', table_name='notifications')
    op.drop_index('index_notifications_on_owner_id', table_name='notifications')
    op.drop_index('index_notifications_on_owner_id_and_timestamp', table_name='notifications')
    op.drop_table('notifications')
    op.drop_index('index_custom_data_flows_code_containers_on_custom_data_flow_id', table_name='custom_data_flows_code_containers')
    op.drop_table('custom_data_flows_code_containers')
    op.drop_index('index_user_tier_versions_on_item_type_and_item_id', table_name='user_tier_versions')
    op.drop_index('index_user_tier_versions_on_org_id', table_name='user_tier_versions')
    op.drop_index('index_user_tier_versions_on_user_id', table_name='user_tier_versions')
    op.drop_table('user_tier_versions')
    op.drop_index('index_code_containers_data_maps_on_code_container_id', table_name='code_containers_data_maps')
    op.drop_index('index_code_containers_data_maps_on_data_map_id', table_name='code_containers_data_maps')
    op.drop_table('code_containers_data_maps')
    op.drop_index('idx_custom_data_flows_access_controls_accessor_role', table_name='custom_data_flows_access_controls')
    op.drop_index('index_custom_data_flows_access_controls_on_custom_data_flow_id', table_name='custom_data_flows_access_controls')
    op.drop_table('custom_data_flows_access_controls')
    op.drop_index('idx_notification_settings_aclv_item_type_item_id', table_name='notification_settings_access_control_versions')
    op.drop_index('idx_notification_settings_aclv_org_id', table_name='notification_settings_access_control_versions')
    op.drop_index('idx_notification_settings_aclv_user_id', table_name='notification_settings_access_control_versions')
    op.drop_table('notification_settings_access_control_versions')
    op.drop_index('unique_schema_migrations', table_name='schema_migrations')
    op.drop_table('schema_migrations')
    op.drop_index('index_notification_settings_on_owner_id', table_name='notification_settings')
    op.drop_index('notification_settings_notification_resource_type', table_name='notification_settings')
    op.drop_index('notification_settings_resource_id', table_name='notification_settings')
    op.drop_index('notification_settings_resource_id_owner_id', table_name='notification_settings')
    op.drop_table('notification_settings')
    op.drop_index('index_custom_data_flows_data_credentials_on_custom_data_flow_id', table_name='custom_data_flows_data_credentials')
    op.drop_table('custom_data_flows_data_credentials')
    op.drop_index('idx_notification_channel_settings_access_controls_accessor_role', table_name='notification_channel_settings_access_controls')
    op.drop_index('notification_settings_acl_accessor_id_type_roles', table_name='notification_channel_settings_access_controls')
    op.drop_table('notification_channel_settings_access_controls')
    op.drop_index('index_org_versions_on_item_type_and_item_id', table_name='org_versions')
    op.drop_index('index_org_versions_on_org_id', table_name='org_versions')
    op.drop_index('index_org_versions_on_user_id', table_name='org_versions')
    op.drop_table('org_versions')
    op.drop_index('idx_data_credentials_aclv_item_type_item_id', table_name='data_credentials_access_control_versions')
    op.drop_index('idx_data_credentials_aclv_org_id', table_name='data_credentials_access_control_versions')
    op.drop_index('idx_data_credentials_aclv_user_id', table_name='data_credentials_access_control_versions')
    op.drop_table('data_credentials_access_control_versions')
    op.drop_index('idx_flow_trigger_versions_item_type_item_id', table_name='flow_trigger_versions')
    op.drop_index('index_flow_trigger_versions_on_org_id', table_name='flow_trigger_versions')
    op.drop_index('index_flow_trigger_versions_on_user_id', table_name='flow_trigger_versions')
    op.drop_table('flow_trigger_versions')
    op.drop_index('dashboard_transforms_resource_id', table_name='dashboard_transforms')
    op.drop_index('dashboard_transforms_resource_type', table_name='dashboard_transforms')
    op.drop_index('index_dashboard_transforms_on_owner_id', table_name='dashboard_transforms')
    op.drop_index('index_dashboard_transforms_on_resource_id_and_resource_type', table_name='dashboard_transforms')
    op.drop_table('dashboard_transforms')
    op.drop_index('index_flow_templates_on_name', table_name='flow_templates')
    op.drop_index('index_flow_templates_on_org_id', table_name='flow_templates')
    op.drop_index('index_flow_templates_on_owner_id', table_name='flow_templates')
    op.drop_table('flow_templates')
    op.drop_table('domain_marketplace_items')
    op.drop_index('index_auth_template_versions_on_item_type_and_item_id', table_name='auth_template_versions')
    op.drop_index('index_auth_template_versions_on_org_id', table_name='auth_template_versions')
    op.drop_index('index_auth_template_versions_on_user_id', table_name='auth_template_versions')
    op.drop_table('auth_template_versions')
    op.drop_index('index_semantic_schemas_on_data_set_id', table_name='semantic_schemas')
    op.drop_index('index_semantic_schemas_on_org_id_and_owner_id', table_name='semantic_schemas')
    op.drop_index('index_semantic_schemas_on_owner_id', table_name='semantic_schemas')
    op.drop_table('semantic_schemas')
    op.drop_index('idx_data_maps_aclv_item_type_item_id', table_name='data_maps_access_control_versions')
    op.drop_index('idx_data_maps_aclv_org_id', table_name='data_maps_access_control_versions')
    op.drop_index('idx_data_maps_aclv_user_id', table_name='data_maps_access_control_versions')
    op.drop_table('data_maps_access_control_versions')
    op.drop_index('idx_endpoint_mapping_versions_item_type_item_id', table_name='endpoint_mapping_versions')
    op.drop_index('index_endpoint_mapping_versions_on_org_id', table_name='endpoint_mapping_versions')
    op.drop_index('index_endpoint_mapping_versions_on_user_id', table_name='endpoint_mapping_versions')
    op.drop_table('endpoint_mapping_versions')
    op.drop_index('index_flow_nodes_access_controls_on_flow_node_id', table_name='flow_nodes_access_controls')
    op.drop_table('flow_nodes_access_controls')
    op.drop_index('data_credentials_group_members_index', table_name='data_credentials_memberships')
    op.drop_index('index_data_credentials_memberships_on_data_credentials_group_id', table_name='data_credentials_memberships')
    op.drop_index('index_data_credentials_memberships_on_data_credentials_id', table_name='data_credentials_memberships')
    op.drop_table('data_credentials_memberships')
    op.drop_index('index_custom_data_flow_versions_on_item_type_and_item_id', table_name='custom_data_flow_versions')
    op.drop_index('index_custom_data_flow_versions_on_org_id', table_name='custom_data_flow_versions')
    op.drop_index('index_custom_data_flow_versions_on_user_id', table_name='custom_data_flow_versions')
    op.drop_table('custom_data_flow_versions')
    op.drop_table('resource_parameters')
    op.drop_index('idx_dashboard_transforms_aclv_item_type_item_id', table_name='dashboard_transforms_access_control_versions')
    op.drop_index('idx_dashboard_transforms_aclv_org_id', table_name='dashboard_transforms_access_control_versions')
    op.drop_index('idx_dashboard_transforms_aclv_user_id', table_name='dashboard_transforms_access_control_versions')
    op.drop_table('dashboard_transforms_access_control_versions')
    op.drop_index('index_data_sets_catalog_ref_versions_on_item_type_and_item_id', table_name='data_sets_catalog_ref_versions')
    op.drop_index('index_data_sets_catalog_ref_versions_on_org_id', table_name='data_sets_catalog_ref_versions')
    op.drop_index('index_data_sets_catalog_ref_versions_on_user_id', table_name='data_sets_catalog_ref_versions')
    op.drop_table('data_sets_catalog_ref_versions')
    op.drop_index('index_code_container_versions_on_item_type_and_item_id', table_name='code_container_versions')
    op.drop_index('index_code_container_versions_on_org_id', table_name='code_container_versions')
    op.drop_index('index_code_container_versions_on_user_id', table_name='code_container_versions')
    op.drop_index('item_id_created_at', table_name='code_container_versions')
    op.drop_table('code_container_versions')
    op.drop_index('index_user_versions_on_item_type_and_item_id', table_name='user_versions')
    op.drop_index('index_user_versions_on_org_id', table_name='user_versions')
    op.drop_index('index_user_versions_on_user_id', table_name='user_versions')
    op.drop_table('user_versions')
    op.drop_table('service_key_events')
    op.drop_index('idx_data_sources_aclv_item_type_item_id', table_name='data_sources_access_control_versions')
    op.drop_index('idx_data_sources_aclv_org_id', table_name='data_sources_access_control_versions')
    op.drop_index('idx_data_sources_aclv_user_id', table_name='data_sources_access_control_versions')
    op.drop_table('data_sources_access_control_versions')
    op.drop_index('fk_rails_95d483a57b', table_name='notifications_archive')
    op.drop_index('index_notifications_on_owner_id', table_name='notifications_archive')
    op.drop_table('notifications_archive')
    op.drop_index('index_data_sources_api_key_versions_on_item_type_and_item_id', table_name='data_sources_api_key_versions')
    op.drop_index('index_data_sources_api_key_versions_on_org_id', table_name='data_sources_api_key_versions')
    op.drop_index('index_data_sources_api_key_versions_on_user_id', table_name='data_sources_api_key_versions')
    op.drop_table('data_sources_api_key_versions')
    op.drop_index('index_rating_votes_on_user_id', table_name='rating_votes')
    op.drop_table('rating_votes')
    op.drop_index('index_data_sets_api_key_versions_on_item_type_and_item_id', table_name='data_sets_api_key_versions')
    op.drop_index('index_data_sets_api_key_versions_on_org_id', table_name='data_sets_api_key_versions')
    op.drop_index('index_data_sets_api_key_versions_on_user_id', table_name='data_sets_api_key_versions')
    op.drop_table('data_sets_api_key_versions')
    op.drop_index('idx_data_schemas_access_controls_accessor_role', table_name='data_schemas_access_controls')
    op.drop_index('index_data_schemas_access_controls_on_data_schema_id', table_name='data_schemas_access_controls')
    op.drop_table('data_schemas_access_controls')
    op.alter_column('auth_templates', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('auth_templates', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_auth_templates_id'), 'auth_templates', ['id'], unique=False)
    op.add_column('clusters', sa.Column('config', sa.JSON(), nullable=True))
    op.add_column('clusters', sa.Column('endpoint_url', sa.String(length=500), nullable=True))
    op.alter_column('clusters', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('clusters', 'status',
               existing_type=mysql.ENUM('INIT', 'ACTIVE', 'PAUSED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('clusters', 'is_default',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               nullable=True)
    op.alter_column('clusters', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('clusters', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index('cluster_name_unique', table_name='clusters')
    op.drop_index('index_clusters_on_org_id', table_name='clusters')
    op.create_index(op.f('ix_clusters_id'), 'clusters', ['id'], unique=False)
    op.drop_constraint('fk_rails_dcf7451a61', 'clusters', type_='foreignkey')
    op.drop_column('clusters', 'provider')
    op.drop_column('clusters', 'region')
    op.drop_column('clusters', 'uid')
    op.drop_column('clusters', 'is_private')
    op.drop_column('clusters', 'org_id')
    op.alter_column('connectors', 'nexset_api_compatible',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               existing_nullable=True)
    op.alter_column('connectors', 'ingestion_mode',
               existing_type=mysql.ENUM('sampling', 'full_ingestion', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               existing_nullable=False)
    op.alter_column('connectors', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('connectors', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_connectors_id'), 'connectors', ['id'], unique=False)
    op.add_column('data_credentials', sa.Column('connection_type', sa.String(length=255), nullable=False))
    op.add_column('data_credentials', sa.Column('config_enc', sa.Text(), nullable=True))
    op.add_column('data_credentials', sa.Column('config_enc_iv', sa.String(length=255), nullable=True))
    op.add_column('data_credentials', sa.Column('api_key_reference', sa.String(length=255), nullable=True))
    op.alter_column('data_credentials', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.alter_column('data_credentials', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_credentials', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_credentials', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_credentials', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('index_data_credentials_on_owner_id', table_name='data_credentials')
    op.drop_index('index_data_credentials_on_users_api_key_id', table_name='data_credentials')
    op.create_index(op.f('ix_data_credentials_id'), 'data_credentials', ['id'], unique=False)
    op.drop_constraint('fk_rails_2c2d5d8d7b', 'data_credentials', type_='foreignkey')
    op.drop_constraint('fk_rails_a6fedb8d95', 'data_credentials', type_='foreignkey')
    op.drop_constraint('fk_rails_9d82f5e8f7', 'data_credentials', type_='foreignkey')
    op.drop_constraint('fk_rails_802479257e', 'data_credentials', type_='foreignkey')
    op.create_foreign_key(None, 'data_credentials', 'orgs', ['org_id'], ['id'])
    op.create_foreign_key(None, 'data_credentials', 'users', ['owner_id'], ['id'])
    op.drop_column('data_credentials', 'users_api_key_id')
    op.drop_column('data_credentials', 'credentials_enc_iv')
    op.drop_column('data_credentials', 'credentials_version')
    op.drop_column('data_credentials', 'vendor_id')
    op.drop_column('data_credentials', 'verified_status')
    op.drop_column('data_credentials', 'managed')
    op.drop_column('data_credentials', 'credentials_enc')
    op.drop_column('data_credentials', 'verified_at')
    op.drop_column('data_credentials', 'connector_type')
    op.drop_column('data_credentials', 'copied_from_id')
    op.drop_column('data_credentials', 'referenced_resources_enabled')
    op.alter_column('data_schemas', 'detected',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'managed',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'template',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'public',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'schema',
               existing_type=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_schemas', 'annotations',
               existing_type=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_schemas', 'validations',
               existing_type=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_schemas', 'data_samples',
               existing_type=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_schemas', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('data_schemas', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index('index_data_schemas_on_owner_id', table_name='data_schemas')
    op.create_index(op.f('ix_data_schemas_id'), 'data_schemas', ['id'], unique=False)
    op.drop_constraint('fk_rails_6a2673c690', 'data_schemas', type_='foreignkey')
    op.drop_constraint('fk_rails_01bea89981', 'data_schemas', type_='foreignkey')
    op.drop_constraint('fk_rails_9373e6ff1c', 'data_schemas', type_='foreignkey')
    op.create_foreign_key(None, 'data_schemas', 'users', ['owner_id'], ['id'])
    op.create_foreign_key(None, 'data_schemas', 'data_credentials', ['data_credentials_id'], ['id'])
    op.create_foreign_key(None, 'data_schemas', 'orgs', ['org_id'], ['id'])
    op.create_foreign_key(None, 'data_schemas', 'data_schemas', ['copied_from_id'], ['id'])
    op.add_column('data_sets', sa.Column('data_sample', sa.JSON(), nullable=True))
    op.add_column('data_sets', sa.Column('schema_sample', sa.JSON(), nullable=True))
    op.add_column('data_sets', sa.Column('transform_config', sa.JSON(), nullable=True))
    op.add_column('data_sets', sa.Column('output_schema_locked', sa.Boolean(), nullable=True))
    op.add_column('data_sets', sa.Column('data_schema_id', sa.Integer(), nullable=True))
    op.alter_column('data_sets', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.alter_column('data_sets', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_sets', 'status',
               existing_type=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sets', 'runtime_status',
               existing_type=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sets', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sets', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sets', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('idx_data_source_id_and_source_schema_id_and_name', table_name='data_sets')
    op.drop_index('index_data_sets_on_data_credentials_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_data_credentials_id_and_source_schema_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_data_source_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_flow_node_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_origin_node_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_owner_id', table_name='data_sets')
    op.drop_index('index_data_sets_on_public', table_name='data_sets')
    op.drop_index('index_data_sets_on_status', table_name='data_sets')
    op.create_index(op.f('ix_data_sets_id'), 'data_sets', ['id'], unique=False)
    op.drop_constraint('fk_rails_3bf9f2f1be', 'data_sets', type_='foreignkey')
    op.drop_constraint('fk_rails_57b182ec8b', 'data_sets', type_='foreignkey')
    op.drop_constraint('fk_rails_d8ee38c2a1', 'data_sets', type_='foreignkey')
    op.create_foreign_key(None, 'data_sets', 'data_schemas', ['data_schema_id'], ['id'])
    op.create_foreign_key(None, 'data_sets', 'flow_nodes', ['flow_node_id'], ['id'])
    op.create_foreign_key(None, 'data_sets', 'data_sources', ['data_source_id'], ['id'])
    op.create_foreign_key(None, 'data_sets', 'users', ['owner_id'], ['id'])
    op.create_foreign_key(None, 'data_sets', 'orgs', ['org_id'], ['id'])
    op.drop_column('data_sets', 'flow_name')
    op.drop_column('data_sets', 'public')
    op.drop_column('data_sets', 'origin_node_id')
    op.drop_column('data_sets', 'out_validation_enabled')
    op.drop_column('data_sets', 'semantic_schema_id')
    op.drop_column('data_sets', 'custom_config')
    op.drop_column('data_sets', 'code_container_id')
    op.drop_column('data_sets', 'runtime_config')
    op.drop_column('data_sets', 'output_validation_schema')
    op.drop_column('data_sets', 'output_validator_id')
    op.drop_column('data_sets', 'output_schema_annotations')
    op.drop_column('data_sets', 'output_schema')
    op.drop_column('data_sets', 'sample_service_id')
    op.drop_column('data_sets', 'source_schema_id')
    op.drop_column('data_sets', 'managed')
    op.drop_column('data_sets', 'referenced_resources_enabled')
    op.drop_column('data_sets', 'parent_data_set_id')
    op.drop_column('data_sets', 'data_sample_id')
    op.drop_column('data_sets', 'source_path')
    op.drop_column('data_sets', 'main_rating_count')
    op.drop_column('data_sets', 'output_schema_validation_enabled')
    op.drop_column('data_sets', 'data_credentials_id')
    op.drop_column('data_sets', 'flow_description')
    op.drop_column('data_sets', 'source_schema')
    op.drop_column('data_sets', 'data_samples')
    op.drop_column('data_sets', 'main_rating')
    op.drop_column('data_sets', 'copied_from_id')
    op.add_column('data_sinks', sa.Column('config', sa.JSON(), nullable=True))
    op.add_column('data_sinks', sa.Column('runtime_config', sa.JSON(), nullable=True))
    op.add_column('data_sinks', sa.Column('connection_type', sa.String(length=255), nullable=True))
    op.add_column('data_sinks', sa.Column('connector_id', sa.Integer(), nullable=True))
    op.alter_column('data_sinks', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_sinks', 'status',
               existing_type=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sinks', 'runtime_status',
               existing_type=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sinks', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sinks', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sinks', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('index_data_sinks_on_data_credentials_group_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_data_set_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_data_source_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_flow_node_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_origin_node_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_owner_id', table_name='data_sinks')
    op.drop_index('index_data_sinks_on_status', table_name='data_sinks')
    op.create_index(op.f('ix_data_sinks_id'), 'data_sinks', ['id'], unique=False)
    op.drop_constraint('fk_rails_e8bce6d122', 'data_sinks', type_='foreignkey')
    op.drop_constraint('fk_rails_1a9c669b0c', 'data_sinks', type_='foreignkey')
    op.drop_constraint('fk_rails_907fd86e0e', 'data_sinks', type_='foreignkey')
    op.drop_constraint('fk_rails_2eac611271', 'data_sinks', type_='foreignkey')
    op.drop_constraint('fk_rails_b2f2a2ec4a', 'data_sinks', type_='foreignkey')
    op.drop_constraint('fk_rails_663e2004db', 'data_sinks', type_='foreignkey')
    op.create_foreign_key(None, 'data_sinks', 'connectors', ['connector_id'], ['id'])
    op.create_foreign_key(None, 'data_sinks', 'users', ['owner_id'], ['id'])
    op.create_foreign_key(None, 'data_sinks', 'data_sets', ['data_set_id'], ['id'])
    op.create_foreign_key(None, 'data_sinks', 'flow_nodes', ['flow_node_id'], ['id'])
    op.create_foreign_key(None, 'data_sinks', 'data_credentials', ['data_credentials_id'], ['id'])
    op.create_foreign_key(None, 'data_sinks', 'orgs', ['org_id'], ['id'])
    op.drop_column('data_sinks', 'flow_name')
    op.drop_column('data_sinks', 'sink_config')
    op.drop_column('data_sinks', 'origin_node_id')
    op.drop_column('data_sinks', 'data_map_id')
    op.drop_column('data_sinks', 'in_memory')
    op.drop_column('data_sinks', 'code_container_id')
    op.drop_column('data_sinks', 'managed')
    op.drop_column('data_sinks', 'flow_description')
    op.drop_column('data_sinks', 'sink_schedule')
    op.drop_column('data_sinks', 'data_source_id')
    op.drop_column('data_sinks', 'data_credentials_group_id')
    op.drop_column('data_sinks', 'vendor_endpoint_id')
    op.drop_column('data_sinks', 'connector_type')
    op.drop_column('data_sinks', 'template_config')
    op.drop_column('data_sinks', 'copied_from_id')
    op.drop_column('data_sinks', 'sink_format')
    op.drop_column('data_sinks', 'referenced_resources_enabled')
    op.add_column('data_sources', sa.Column('config', sa.JSON(), nullable=True))
    op.add_column('data_sources', sa.Column('runtime_config', sa.JSON(), nullable=True))
    op.add_column('data_sources', sa.Column('connection_type', sa.String(length=255), nullable=True))
    op.add_column('data_sources', sa.Column('ingestion_mode', sa.String(length=50), nullable=True))
    op.add_column('data_sources', sa.Column('connector_id', sa.Integer(), nullable=True))
    op.alter_column('data_sources', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('data_sources', 'status',
               existing_type=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', 'RATE_LIMITED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sources', 'runtime_status',
               existing_type=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('data_sources', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sources', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('data_sources', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('index_data_sources_on_data_credentials_group_id', table_name='data_sources')
    op.drop_index('index_data_sources_on_flow_node_id', table_name='data_sources')
    op.drop_index('index_data_sources_on_origin_node_id', table_name='data_sources')
    op.drop_index('index_data_sources_on_owner_id', table_name='data_sources')
    op.drop_index('index_data_sources_on_status', table_name='data_sources')
    op.create_index(op.f('ix_data_sources_id'), 'data_sources', ['id'], unique=False)
    op.drop_constraint('fk_rails_5b236ced0d', 'data_sources', type_='foreignkey')
    op.drop_constraint('fk_rails_75c069d31f', 'data_sources', type_='foreignkey')
    op.drop_constraint('fk_rails_9a67102f3f', 'data_sources', type_='foreignkey')
    op.drop_constraint('fk_rails_df7ad9b6ac', 'data_sources', type_='foreignkey')
    op.drop_constraint('fk_rails_5ba65b9c5c', 'data_sources', type_='foreignkey')
    op.create_foreign_key(None, 'data_sources', 'orgs', ['org_id'], ['id'])
    op.create_foreign_key(None, 'data_sources', 'users', ['owner_id'], ['id'])
    op.create_foreign_key(None, 'data_sources', 'data_credentials', ['data_credentials_id'], ['id'])
    op.create_foreign_key(None, 'data_sources', 'flow_nodes', ['origin_node_id'], ['id'])
    op.create_foreign_key(None, 'data_sources', 'connectors', ['connector_id'], ['id'])
    op.drop_column('data_sources', 'flow_name')
    op.drop_column('data_sources', 'reingest_status')
    op.drop_column('data_sources', 'run_now_status')
    op.drop_column('data_sources', 'data_sink_id')
    op.drop_column('data_sources', 'code_container_id')
    op.drop_column('data_sources', 'data_credentials_group_id')
    op.drop_column('data_sources', 'connector_type')
    op.drop_column('data_sources', 'poll_schedule')
    op.drop_column('data_sources', 'last_run_id')
    op.drop_column('data_sources', 'managed')
    op.drop_column('data_sources', 'ingest_method')
    op.drop_column('data_sources', 'source_config')
    op.drop_column('data_sources', 'template_config')
    op.drop_column('data_sources', 'referenced_resources_enabled')
    op.drop_column('data_sources', 'flow_description')
    op.drop_column('data_sources', 'vendor_endpoint_id')
    op.drop_column('data_sources', 'source_format')
    op.drop_column('data_sources', 'flow_node_id')
    op.drop_column('data_sources', 'adaptive_flow')
    op.drop_column('data_sources', 'reingest_at')
    op.drop_column('data_sources', 'copied_from_id')
    op.alter_column('flow_nodes', 'flow_type',
               existing_type=mysql.ENUM('auto', 'streaming', 'replication', 'in_memory', 'spark', 'cdc', 'elt', 'custom', 'rag', 'api_server', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('flow_nodes', 'ingestion_mode',
               existing_type=mysql.ENUM('sampling', 'full_ingestion', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('flow_nodes', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('flow_nodes', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('flow_nodes', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('index_flow_nodes_on_cluster_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_data_set_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_data_sink_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_data_source_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_org_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_origin_node_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_owner_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_parent_node_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_project_id', table_name='flow_nodes')
    op.drop_index('index_flow_nodes_on_shared_origin_node_id', table_name='flow_nodes')
    op.create_index(op.f('ix_flow_nodes_id'), 'flow_nodes', ['id'], unique=False)
    op.create_foreign_key(None, 'flow_nodes', 'data_sources', ['data_source_id'], ['id'])
    op.create_foreign_key(None, 'flow_nodes', 'data_sets', ['data_set_id'], ['id'])
    op.create_foreign_key(None, 'flow_nodes', 'flow_nodes', ['shared_origin_node_id'], ['id'])
    op.create_foreign_key(None, 'flow_nodes', 'data_sinks', ['data_sink_id'], ['id'])
    op.create_foreign_key(None, 'flow_nodes', 'flow_nodes', ['origin_node_id'], ['id'])
    op.drop_column('flow_nodes', 'cluster_id')
    op.drop_column('flow_nodes', 'project_id')
    op.drop_column('flow_nodes', 'managed')
    op.drop_column('flow_nodes', 'status')
    op.drop_column('flow_nodes', 'parent_node_id')
    op.drop_column('flow_nodes', 'nexset_api_compatible')
    op.drop_column('flow_nodes', 'description')
    op.drop_column('flow_nodes', 'copied_from_id')
    op.alter_column('org_memberships', 'status',
               existing_type=mysql.ENUM('ACTIVE', 'DEACTIVATED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               nullable=False)
    op.alter_column('org_memberships', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('org_memberships', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.drop_index('index_org_memberships_on_org_id', table_name='org_memberships')
    op.drop_index('index_org_memberships_on_user_id', table_name='org_memberships')
    op.drop_index('index_org_memberships_on_user_id_and_org_id', table_name='org_memberships')
    op.create_index(op.f('ix_org_memberships_id'), 'org_memberships', ['id'], unique=False)
    op.create_foreign_key(None, 'org_memberships', 'users', ['user_id'], ['id'])
    op.create_foreign_key(None, 'org_memberships', 'orgs', ['org_id'], ['id'])
    op.alter_column('org_tiers', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_tiers', 'record_count_limit_time',
               existing_type=mysql.ENUM('HOURLY', 'DAILY', 'WEEKLY', 'MONTHLY', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_tiers', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('org_tiers', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_org_tiers_id'), 'org_tiers', ['id'], unique=False)
    op.create_foreign_key(None, 'org_tiers', 'rate_limits', ['rate_limit_id'], ['id'])
    op.add_column('orgs', sa.Column('client_id', sa.String(length=255), nullable=True))
    op.alter_column('orgs', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('orgs', 'status',
               existing_type=mysql.ENUM('ACTIVE', 'DEACTIVATED', 'SOURCE_COUNT_CAPPED', 'SOURCE_DATA_CAPPED', 'TRIAL_EXPIRED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('orgs', 'allow_api_key_access',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=None,
               nullable=True)
    op.alter_column('orgs', 'owner_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.drop_index('fk_rails_8d5cb4211b', table_name='orgs')
    op.drop_index('index_orgs_on_owner_id', table_name='orgs')
    op.drop_index('nexla_admin_org_unique', table_name='orgs')
    op.drop_index('org_search_index_name_index', table_name='orgs')
    op.create_index(op.f('ix_orgs_id'), 'orgs', ['id'], unique=False)
    op.drop_constraint('fk_rails_4df2dc662c', 'orgs', type_='foreignkey')
    op.drop_constraint('fk_rails_8377a70b57', 'orgs', type_='foreignkey')
    op.create_foreign_key(None, 'orgs', 'users', ['owner_id'], ['id'])
    op.create_foreign_key(None, 'orgs', 'org_tiers', ['org_tier_id'], ['id'])
    op.drop_column('orgs', 'webhook_host')
    op.drop_column('orgs', 'client_identifier')
    op.drop_column('orgs', 'new_cluster_id')
    op.drop_column('orgs', 'self_signup')
    op.drop_column('orgs', 'require_org_admin_to_subscribe')
    op.drop_column('orgs', 'members_default_access_role')
    op.drop_column('orgs', 'cluster_status')
    op.drop_column('orgs', 'require_org_admin_to_publish')
    op.drop_column('orgs', 'email_domain_verified_at')
    op.drop_column('orgs', 'name_verified_at')
    op.drop_column('orgs', 'email')
    op.drop_column('orgs', 'features_enabled')
    op.drop_column('orgs', 'referenced_resources_enabled')
    op.drop_column('orgs', 'throttle_until')
    op.drop_column('orgs', 'self_signup_members_limit')
    op.drop_column('orgs', 'trial_expires_at')
    op.drop_column('orgs', 'email_domain')
    op.drop_column('orgs', 'billing_owner_id')
    op.drop_column('orgs', 'rate_limit_id')
    op.drop_column('orgs', 'nexla_admin_org')
    op.drop_column('orgs', 'enable_nexla_password_login')
    op.alter_column('projects', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.alter_column('projects', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('projects', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               nullable=True)
    op.alter_column('projects', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.drop_index('index_projects_on_org_id', table_name='projects')
    op.drop_index('index_projects_on_owner_id', table_name='projects')
    op.create_index(op.f('ix_projects_id'), 'projects', ['id'], unique=False)
    op.drop_column('projects', 'client_url')
    op.drop_column('projects', 'copied_from_id')
    op.drop_column('projects', 'client_identifier')
    op.add_column('rate_limits', sa.Column('requests_per_minute', sa.Integer(), nullable=True))
    op.add_column('rate_limits', sa.Column('requests_per_hour', sa.Integer(), nullable=True))
    op.add_column('rate_limits', sa.Column('requests_per_day', sa.Integer(), nullable=True))
    op.add_column('rate_limits', sa.Column('bytes_per_minute', sa.BigInteger(), nullable=True))
    op.add_column('rate_limits', sa.Column('bytes_per_hour', sa.BigInteger(), nullable=True))
    op.add_column('rate_limits', sa.Column('bytes_per_day', sa.BigInteger(), nullable=True))
    op.add_column('rate_limits', sa.Column('resource_type', sa.String(length=50), nullable=True))
    op.add_column('rate_limits', sa.Column('resource_id', sa.Integer(), nullable=True))
    op.alter_column('rate_limits', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('rate_limits', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_rate_limits_id'), 'rate_limits', ['id'], unique=False)
    op.drop_column('rate_limits', 'common')
    op.drop_column('rate_limits', 'medium')
    op.drop_column('rate_limits', 'high')
    op.drop_column('rate_limits', 'light')
    op.alter_column('user_tiers', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tiers', 'record_count_limit_time',
               existing_type=mysql.ENUM('HOURLY', 'DAILY', 'WEEKLY', 'MONTHLY', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tiers', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('user_tiers', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_user_tiers_id'), 'user_tiers', ['id'], unique=False)
    op.alter_column('users', 'email',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.String(length=254),
               existing_nullable=False)
    op.alter_column('users', 'full_name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.alter_column('users', 'password_digest',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.alter_column('users', 'status',
               existing_type=mysql.ENUM('ACTIVE', 'DEACTIVATED', 'SOURCE_COUNT_CAPPED', 'SOURCE_DATA_CAPPED', 'TRIAL_EXPIRED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=None,
               type_=sa.String(length=50),
               existing_nullable=True)
    op.alter_column('users', 'password_retry_count',
               existing_type=mysql.INTEGER(),
               server_default=None,
               existing_nullable=True)
    op.alter_column('users', 'password_reset_token',
               existing_type=mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               type_=sa.String(length=255),
               existing_nullable=True)
    op.alter_column('users', 'password_reset_token_count',
               existing_type=mysql.INTEGER(),
               server_default=None,
               existing_nullable=True)
    op.drop_index('index_users_on_email', table_name='users')
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.drop_constraint('fk_rails_6c81f0608e', 'users', type_='foreignkey')
    op.create_foreign_key(None, 'users', 'orgs', ['default_org_id'], ['id'])
    op.drop_column('users', 'throttle_until')
    op.drop_column('users', 'rate_limit_id')
    op.drop_column('users', 'api_key')
    op.add_column('vendors', sa.Column('is_active', sa.Boolean(), nullable=True))
    op.alter_column('vendors', 'display_name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.alter_column('vendors', 'description',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               type_=sa.Text(),
               existing_nullable=True)
    op.alter_column('vendors', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.alter_column('vendors', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=sa.text('now()'),
               existing_nullable=False)
    op.create_index(op.f('ix_vendors_id'), 'vendors', ['id'], unique=False)
    op.drop_constraint('fk_rails_045348b3a3', 'vendors', type_='foreignkey')
    op.drop_column('vendors', 'small_logo')
    op.drop_column('vendors', 'connector_id')
    op.drop_column('vendors', 'auth_template')
    op.drop_column('vendors', 'connection_type')
    op.drop_column('vendors', 'logo')
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('vendors', sa.Column('logo', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('vendors', sa.Column('connection_type', mysql.ENUM('api_push', 'api_pull', 'nexla_rest', 'rest', 's3', 'mysql', 'redshift', 'ftp', 'bigquery', 'http', 'postgres', 'oracle', 'dropbox', 'gdrive', 'box', 'snowflake', 'email', 'github', 'couchbase', 'soap', 'script', 'collibra', 'api_streams', 'api_multi', charset='utf8mb4', collation='utf8mb4_unicode_ci'), server_default=sa.text("'rest'"), nullable=True))
    op.add_column('vendors', sa.Column('auth_template', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('vendors', sa.Column('connector_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('vendors', sa.Column('small_logo', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.create_foreign_key('fk_rails_045348b3a3', 'vendors', 'connectors', ['connector_id'], ['id'])
    op.drop_index(op.f('ix_vendors_id'), table_name='vendors')
    op.alter_column('vendors', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vendors', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('vendors', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.alter_column('vendors', 'display_name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.drop_column('vendors', 'is_active')
    op.add_column('users', sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('users', sa.Column('rate_limit_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('users', sa.Column('throttle_until', mysql.TIMESTAMP(), nullable=True))
    op.drop_constraint(None, 'users', type_='foreignkey')
    op.create_foreign_key('fk_rails_6c81f0608e', 'users', 'orgs', ['default_org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.create_index('index_users_on_email', 'users', ['email'], unique=False)
    op.alter_column('users', 'password_reset_token_count',
               existing_type=mysql.INTEGER(),
               server_default=sa.text("'0'"),
               existing_nullable=True)
    op.alter_column('users', 'password_reset_token',
               existing_type=sa.String(length=255),
               type_=mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('users', 'password_retry_count',
               existing_type=mysql.INTEGER(),
               server_default=sa.text("'0'"),
               existing_nullable=True)
    op.alter_column('users', 'status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'ACTIVE'"),
               type_=mysql.ENUM('ACTIVE', 'DEACTIVATED', 'SOURCE_COUNT_CAPPED', 'SOURCE_DATA_CAPPED', 'TRIAL_EXPIRED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('users', 'password_digest',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.alter_column('users', 'full_name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=False)
    op.alter_column('users', 'email',
               existing_type=sa.String(length=254),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=False)
    op.drop_index(op.f('ix_user_tiers_id'), table_name='user_tiers')
    op.alter_column('user_tiers', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tiers', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('user_tiers', 'record_count_limit_time',
               existing_type=mysql.ENUM('HOURLY', 'DAILY', 'WEEKLY', 'MONTHLY', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=sa.text("'DAILY'"),
               existing_nullable=False)
    op.alter_column('user_tiers', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               server_default=sa.text("'FREE'"),
               existing_nullable=False)
    op.add_column('rate_limits', sa.Column('light', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('rate_limits', sa.Column('high', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('rate_limits', sa.Column('medium', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('rate_limits', sa.Column('common', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.drop_index(op.f('ix_rate_limits_id'), table_name='rate_limits')
    op.alter_column('rate_limits', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('rate_limits', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.drop_column('rate_limits', 'resource_id')
    op.drop_column('rate_limits', 'resource_type')
    op.drop_column('rate_limits', 'bytes_per_day')
    op.drop_column('rate_limits', 'bytes_per_hour')
    op.drop_column('rate_limits', 'bytes_per_minute')
    op.drop_column('rate_limits', 'requests_per_day')
    op.drop_column('rate_limits', 'requests_per_hour')
    op.drop_column('rate_limits', 'requests_per_minute')
    op.add_column('projects', sa.Column('client_identifier', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('projects', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('projects', sa.Column('client_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.drop_index(op.f('ix_projects_id'), table_name='projects')
    op.create_index('index_projects_on_owner_id', 'projects', ['owner_id'], unique=False)
    op.create_index('index_projects_on_org_id', 'projects', ['org_id'], unique=False)
    op.alter_column('projects', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('projects', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('projects', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('projects', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.add_column('orgs', sa.Column('enable_nexla_password_login', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('nexla_admin_org', mysql.BIT(length=1), nullable=True))
    op.add_column('orgs', sa.Column('rate_limit_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('billing_owner_id', mysql.INTEGER(), autoincrement=False, nullable=False))
    op.add_column('orgs', sa.Column('email_domain', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('orgs', sa.Column('trial_expires_at', mysql.DATETIME(), nullable=True))
    op.add_column('orgs', sa.Column('self_signup_members_limit', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('throttle_until', mysql.TIMESTAMP(), nullable=True))
    op.add_column('orgs', sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('features_enabled', mysql.JSON(), nullable=True))
    op.add_column('orgs', sa.Column('email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('orgs', sa.Column('name_verified_at', mysql.DATETIME(), nullable=True))
    op.add_column('orgs', sa.Column('email_domain_verified_at', mysql.DATETIME(), nullable=True))
    op.add_column('orgs', sa.Column('require_org_admin_to_publish', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('cluster_status', mysql.ENUM('ACTIVE', 'MIGRATING', charset='utf8mb4', collation='utf8mb4_unicode_ci'), server_default=sa.text("'ACTIVE'"), nullable=True))
    op.add_column('orgs', sa.Column('members_default_access_role', mysql.INTEGER(), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('require_org_admin_to_subscribe', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('self_signup', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('new_cluster_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('orgs', sa.Column('client_identifier', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('orgs', sa.Column('webhook_host', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.drop_constraint(None, 'orgs', type_='foreignkey')
    op.drop_constraint(None, 'orgs', type_='foreignkey')
    op.create_foreign_key('fk_rails_8377a70b57', 'orgs', 'users', ['billing_owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_4df2dc662c', 'orgs', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.drop_index(op.f('ix_orgs_id'), table_name='orgs')
    op.create_index('org_search_index_name_index', 'orgs', ['search_index_name'], unique=True)
    op.create_index('nexla_admin_org_unique', 'orgs', ['nexla_admin_org'], unique=True)
    op.create_index('index_orgs_on_owner_id', 'orgs', ['owner_id'], unique=False)
    op.create_index('fk_rails_8d5cb4211b', 'orgs', ['cluster_id'], unique=False)
    op.alter_column('orgs', 'owner_id',
               existing_type=mysql.INTEGER(),
               nullable=False)
    op.alter_column('orgs', 'allow_api_key_access',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               nullable=False)
    op.alter_column('orgs', 'status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'ACTIVE'"),
               type_=mysql.ENUM('ACTIVE', 'DEACTIVATED', 'SOURCE_COUNT_CAPPED', 'SOURCE_DATA_CAPPED', 'TRIAL_EXPIRED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('orgs', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.drop_column('orgs', 'client_id')
    op.drop_constraint(None, 'org_tiers', type_='foreignkey')
    op.drop_index(op.f('ix_org_tiers_id'), table_name='org_tiers')
    op.alter_column('org_tiers', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_tiers', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_tiers', 'record_count_limit_time',
               existing_type=mysql.ENUM('HOURLY', 'DAILY', 'WEEKLY', 'MONTHLY', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=sa.text("'DAILY'"),
               existing_nullable=False)
    op.alter_column('org_tiers', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               server_default=sa.text("'FREE'"),
               existing_nullable=False)
    op.drop_constraint(None, 'org_memberships', type_='foreignkey')
    op.drop_constraint(None, 'org_memberships', type_='foreignkey')
    op.drop_index(op.f('ix_org_memberships_id'), table_name='org_memberships')
    op.create_index('index_org_memberships_on_user_id_and_org_id', 'org_memberships', ['user_id', 'org_id'], unique=True)
    op.create_index('index_org_memberships_on_user_id', 'org_memberships', ['user_id'], unique=False)
    op.create_index('index_org_memberships_on_org_id', 'org_memberships', ['org_id'], unique=False)
    op.alter_column('org_memberships', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_memberships', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('org_memberships', 'status',
               existing_type=mysql.ENUM('ACTIVE', 'DEACTIVATED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=sa.text("'ACTIVE'"),
               nullable=True)
    op.add_column('flow_nodes', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('flow_nodes', sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('flow_nodes', sa.Column('nexset_api_compatible', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False))
    op.add_column('flow_nodes', sa.Column('parent_node_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('flow_nodes', sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', 'RATE_LIMITED', charset='utf8mb4', collation='utf8mb4_unicode_ci'), server_default=sa.text("'INIT'"), nullable=True))
    op.add_column('flow_nodes', sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False))
    op.add_column('flow_nodes', sa.Column('project_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('flow_nodes', sa.Column('cluster_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.drop_constraint(None, 'flow_nodes', type_='foreignkey')
    op.drop_constraint(None, 'flow_nodes', type_='foreignkey')
    op.drop_constraint(None, 'flow_nodes', type_='foreignkey')
    op.drop_constraint(None, 'flow_nodes', type_='foreignkey')
    op.drop_constraint(None, 'flow_nodes', type_='foreignkey')
    op.drop_index(op.f('ix_flow_nodes_id'), table_name='flow_nodes')
    op.create_index('index_flow_nodes_on_shared_origin_node_id', 'flow_nodes', ['shared_origin_node_id'], unique=False)
    op.create_index('index_flow_nodes_on_project_id', 'flow_nodes', ['project_id'], unique=False)
    op.create_index('index_flow_nodes_on_parent_node_id', 'flow_nodes', ['parent_node_id'], unique=False)
    op.create_index('index_flow_nodes_on_owner_id', 'flow_nodes', ['owner_id'], unique=False)
    op.create_index('index_flow_nodes_on_origin_node_id', 'flow_nodes', ['origin_node_id'], unique=False)
    op.create_index('index_flow_nodes_on_org_id', 'flow_nodes', ['org_id'], unique=False)
    op.create_index('index_flow_nodes_on_data_source_id', 'flow_nodes', ['data_source_id'], unique=False)
    op.create_index('index_flow_nodes_on_data_sink_id', 'flow_nodes', ['data_sink_id'], unique=False)
    op.create_index('index_flow_nodes_on_data_set_id', 'flow_nodes', ['data_set_id'], unique=False)
    op.create_index('index_flow_nodes_on_cluster_id', 'flow_nodes', ['cluster_id'], unique=False)
    op.alter_column('flow_nodes', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('flow_nodes', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('flow_nodes', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('flow_nodes', 'ingestion_mode',
               existing_type=sa.String(length=50),
               server_default=sa.text("'sampling'"),
               type_=mysql.ENUM('sampling', 'full_ingestion', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('flow_nodes', 'flow_type',
               existing_type=sa.String(length=50),
               server_default=sa.text("'streaming'"),
               type_=mysql.ENUM('auto', 'streaming', 'replication', 'in_memory', 'spark', 'cdc', 'elt', 'custom', 'rag', 'api_server', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.add_column('data_sources', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('reingest_at', mysql.DATETIME(), nullable=True))
    op.add_column('data_sources', sa.Column('adaptive_flow', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('flow_node_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('source_format', mysql.ENUM('JSON', 'XML', 'CSV', 'TSV', charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sources', sa.Column('vendor_endpoint_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('flow_description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sources', sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('template_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sources', sa.Column('source_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sources', sa.Column('ingest_method', mysql.ENUM('POLL', 'API', charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sources', sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('last_run_id', mysql.BIGINT(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('poll_schedule', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sources', sa.Column('connector_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'s3'"), nullable=True))
    op.add_column('data_sources', sa.Column('data_credentials_group_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sources', sa.Column('run_now_status', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sources', sa.Column('reingest_status', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sources', sa.Column('flow_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.drop_constraint(None, 'data_sources', type_='foreignkey')
    op.drop_constraint(None, 'data_sources', type_='foreignkey')
    op.drop_constraint(None, 'data_sources', type_='foreignkey')
    op.drop_constraint(None, 'data_sources', type_='foreignkey')
    op.drop_constraint(None, 'data_sources', type_='foreignkey')
    op.create_foreign_key('fk_rails_5ba65b9c5c', 'data_sources', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_df7ad9b6ac', 'data_sources', 'connectors', ['connector_type'], ['type'])
    op.create_foreign_key('fk_rails_9a67102f3f', 'data_sources', 'orgs', ['org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_75c069d31f', 'data_sources', 'data_credentials', ['data_credentials_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_5b236ced0d', 'data_sources', 'data_credentials_groups', ['data_credentials_group_id'], ['id'])
    op.drop_index(op.f('ix_data_sources_id'), table_name='data_sources')
    op.create_index('index_data_sources_on_status', 'data_sources', ['status'], unique=False)
    op.create_index('index_data_sources_on_owner_id', 'data_sources', ['owner_id'], unique=False)
    op.create_index('index_data_sources_on_origin_node_id', 'data_sources', ['origin_node_id'], unique=False)
    op.create_index('index_data_sources_on_flow_node_id', 'data_sources', ['flow_node_id'], unique=False)
    op.create_index('index_data_sources_on_data_credentials_group_id', 'data_sources', ['data_credentials_group_id'], unique=False)
    op.alter_column('data_sources', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('data_sources', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sources', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sources', 'runtime_status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'IDLE'"),
               type_=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sources', 'status',
               existing_type=sa.String(length=50),
               type_=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', 'RATE_LIMITED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sources', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.drop_column('data_sources', 'connector_id')
    op.drop_column('data_sources', 'ingestion_mode')
    op.drop_column('data_sources', 'connection_type')
    op.drop_column('data_sources', 'runtime_config')
    op.drop_column('data_sources', 'config')
    op.add_column('data_sinks', sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('sink_format', mysql.ENUM('JSON', 'XML', 'CSV', 'TSV', charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sinks', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('template_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sinks', sa.Column('connector_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'s3'"), nullable=True))
    op.add_column('data_sinks', sa.Column('vendor_endpoint_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('data_credentials_group_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('sink_schedule', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sinks', sa.Column('flow_description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sinks', sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('in_memory', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False))
    op.add_column('data_sinks', sa.Column('data_map_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sinks', sa.Column('sink_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sinks', sa.Column('flow_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.drop_constraint(None, 'data_sinks', type_='foreignkey')
    op.create_foreign_key('fk_rails_663e2004db', 'data_sinks', 'data_credentials', ['data_credentials_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_b2f2a2ec4a', 'data_sinks', 'data_credentials_groups', ['data_credentials_group_id'], ['id'])
    op.create_foreign_key('fk_rails_2eac611271', 'data_sinks', 'orgs', ['org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_907fd86e0e', 'data_sinks', 'data_sources', ['data_source_id'], ['id'])
    op.create_foreign_key('fk_rails_1a9c669b0c', 'data_sinks', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_e8bce6d122', 'data_sinks', 'connectors', ['connector_type'], ['type'])
    op.drop_index(op.f('ix_data_sinks_id'), table_name='data_sinks')
    op.create_index('index_data_sinks_on_status', 'data_sinks', ['status'], unique=False)
    op.create_index('index_data_sinks_on_owner_id', 'data_sinks', ['owner_id'], unique=False)
    op.create_index('index_data_sinks_on_origin_node_id', 'data_sinks', ['origin_node_id'], unique=False)
    op.create_index('index_data_sinks_on_flow_node_id', 'data_sinks', ['flow_node_id'], unique=False)
    op.create_index('index_data_sinks_on_data_source_id', 'data_sinks', ['data_source_id'], unique=False)
    op.create_index('index_data_sinks_on_data_set_id', 'data_sinks', ['data_set_id'], unique=False)
    op.create_index('index_data_sinks_on_data_credentials_group_id', 'data_sinks', ['data_credentials_group_id'], unique=False)
    op.alter_column('data_sinks', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('data_sinks', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sinks', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sinks', 'runtime_status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'IDLE'"),
               type_=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sinks', 'status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'INIT'"),
               type_=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sinks', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.drop_column('data_sinks', 'connector_id')
    op.drop_column('data_sinks', 'connection_type')
    op.drop_column('data_sinks', 'runtime_config')
    op.drop_column('data_sinks', 'config')
    op.add_column('data_sets', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('main_rating', mysql.FLOAT(), nullable=True))
    op.add_column('data_sets', sa.Column('data_samples', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('source_schema', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('flow_description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sets', sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('output_schema_validation_enabled', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('main_rating_count', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('source_path', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('data_sample_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('parent_data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('source_schema_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_sets', sa.Column('sample_service_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('output_schema', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('output_schema_annotations', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('output_validator_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('output_validation_schema', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('runtime_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('custom_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_sets', sa.Column('semantic_schema_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('out_validation_enabled', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('public', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_sets', sa.Column('flow_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.drop_constraint(None, 'data_sets', type_='foreignkey')
    op.drop_constraint(None, 'data_sets', type_='foreignkey')
    op.drop_constraint(None, 'data_sets', type_='foreignkey')
    op.drop_constraint(None, 'data_sets', type_='foreignkey')
    op.drop_constraint(None, 'data_sets', type_='foreignkey')
    op.create_foreign_key('fk_rails_d8ee38c2a1', 'data_sets', 'code_containers', ['code_container_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_57b182ec8b', 'data_sets', 'orgs', ['org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_3bf9f2f1be', 'data_sets', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.drop_index(op.f('ix_data_sets_id'), table_name='data_sets')
    op.create_index('index_data_sets_on_status', 'data_sets', ['status'], unique=False)
    op.create_index('index_data_sets_on_public', 'data_sets', ['public'], unique=False)
    op.create_index('index_data_sets_on_owner_id', 'data_sets', ['owner_id'], unique=False)
    op.create_index('index_data_sets_on_origin_node_id', 'data_sets', ['origin_node_id'], unique=False)
    op.create_index('index_data_sets_on_flow_node_id', 'data_sets', ['flow_node_id'], unique=False)
    op.create_index('index_data_sets_on_data_source_id', 'data_sets', ['data_source_id'], unique=False)
    op.create_index('index_data_sets_on_data_credentials_id_and_source_schema_id', 'data_sets', ['data_credentials_id', 'source_schema_id'], unique=True)
    op.create_index('index_data_sets_on_data_credentials_id', 'data_sets', ['data_credentials_id'], unique=False)
    op.create_index('idx_data_source_id_and_source_schema_id_and_name', 'data_sets', ['data_source_id', 'source_schema_id', 'name'], unique=True)
    op.alter_column('data_sets', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('data_sets', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sets', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_sets', 'runtime_status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'IDLE'"),
               type_=mysql.ENUM('IDLE', 'PROCESSING', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sets', 'status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'INIT'"),
               type_=mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_sets', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.alter_column('data_sets', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.drop_column('data_sets', 'data_schema_id')
    op.drop_column('data_sets', 'output_schema_locked')
    op.drop_column('data_sets', 'transform_config')
    op.drop_column('data_sets', 'schema_sample')
    op.drop_column('data_sets', 'data_sample')
    op.drop_constraint(None, 'data_schemas', type_='foreignkey')
    op.drop_constraint(None, 'data_schemas', type_='foreignkey')
    op.drop_constraint(None, 'data_schemas', type_='foreignkey')
    op.drop_constraint(None, 'data_schemas', type_='foreignkey')
    op.create_foreign_key('fk_rails_9373e6ff1c', 'data_schemas', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_01bea89981', 'data_schemas', 'orgs', ['org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_6a2673c690', 'data_schemas', 'data_credentials', ['data_credentials_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.drop_index(op.f('ix_data_schemas_id'), table_name='data_schemas')
    op.create_index('index_data_schemas_on_owner_id', 'data_schemas', ['owner_id'], unique=False)
    op.alter_column('data_schemas', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('data_schemas', 'data_samples',
               existing_type=sa.Text(),
               type_=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_schemas', 'validations',
               existing_type=sa.Text(),
               type_=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_schemas', 'annotations',
               existing_type=sa.Text(),
               type_=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_schemas', 'schema',
               existing_type=sa.Text(),
               type_=mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('data_schemas', 'public',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               existing_nullable=False)
    op.alter_column('data_schemas', 'template',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               existing_nullable=False)
    op.alter_column('data_schemas', 'managed',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               existing_nullable=False)
    op.alter_column('data_schemas', 'detected',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               existing_nullable=False)
    op.add_column('data_credentials', sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True))
    op.add_column('data_credentials', sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_credentials', sa.Column('connector_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'s3'"), nullable=True))
    op.add_column('data_credentials', sa.Column('verified_at', mysql.DATETIME(), nullable=True))
    op.add_column('data_credentials', sa.Column('credentials_enc', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True))
    op.add_column('data_credentials', sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True))
    op.add_column('data_credentials', sa.Column('verified_status', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=1024), nullable=True))
    op.add_column('data_credentials', sa.Column('vendor_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('data_credentials', sa.Column('credentials_version', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'1'"), nullable=True))
    op.add_column('data_credentials', sa.Column('credentials_enc_iv', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('data_credentials', sa.Column('users_api_key_id', mysql.INTEGER(), autoincrement=False, nullable=True))
    op.drop_constraint(None, 'data_credentials', type_='foreignkey')
    op.drop_constraint(None, 'data_credentials', type_='foreignkey')
    op.create_foreign_key('fk_rails_802479257e', 'data_credentials', 'connectors', ['connector_type'], ['type'])
    op.create_foreign_key('fk_rails_9d82f5e8f7', 'data_credentials', 'orgs', ['org_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_a6fedb8d95', 'data_credentials', 'users', ['owner_id'], ['id'], onupdate='RESTRICT', ondelete='RESTRICT')
    op.create_foreign_key('fk_rails_2c2d5d8d7b', 'data_credentials', 'users_api_keys', ['users_api_key_id'], ['id'])
    op.drop_index(op.f('ix_data_credentials_id'), table_name='data_credentials')
    op.create_index('index_data_credentials_on_users_api_key_id', 'data_credentials', ['users_api_key_id'], unique=False)
    op.create_index('index_data_credentials_on_owner_id', 'data_credentials', ['owner_id'], unique=False)
    op.alter_column('data_credentials', 'org_id',
               existing_type=mysql.INTEGER(),
               nullable=True)
    op.alter_column('data_credentials', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_credentials', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               nullable=False)
    op.alter_column('data_credentials', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.alter_column('data_credentials', 'name',
               existing_type=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               nullable=True)
    op.drop_column('data_credentials', 'api_key_reference')
    op.drop_column('data_credentials', 'config_enc_iv')
    op.drop_column('data_credentials', 'config_enc')
    op.drop_column('data_credentials', 'connection_type')
    op.drop_index(op.f('ix_connectors_id'), table_name='connectors')
    op.alter_column('connectors', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('connectors', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('connectors', 'ingestion_mode',
               existing_type=mysql.ENUM('sampling', 'full_ingestion', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               server_default=sa.text("'full_ingestion'"),
               existing_nullable=False)
    op.alter_column('connectors', 'nexset_api_compatible',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               existing_nullable=True)
    op.add_column('clusters', sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False))
    op.add_column('clusters', sa.Column('is_private', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=False))
    op.add_column('clusters', sa.Column('uid', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True))
    op.add_column('clusters', sa.Column('region', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False))
    op.add_column('clusters', sa.Column('provider', mysql.ENUM('aws', 'gcp', 'azure', 'private', charset='utf8mb4', collation='utf8mb4_unicode_ci'), server_default=sa.text("'aws'"), nullable=False))
    op.create_foreign_key('fk_rails_dcf7451a61', 'clusters', 'orgs', ['org_id'], ['id'])
    op.drop_index(op.f('ix_clusters_id'), table_name='clusters')
    op.create_index('index_clusters_on_org_id', 'clusters', ['org_id'], unique=False)
    op.create_index('cluster_name_unique', 'clusters', ['name'], unique=True)
    op.alter_column('clusters', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('clusters', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('clusters', 'is_default',
               existing_type=mysql.TINYINT(display_width=1),
               server_default=sa.text("'0'"),
               nullable=False)
    op.alter_column('clusters', 'status',
               existing_type=sa.String(length=50),
               server_default=sa.text("'INIT'"),
               type_=mysql.ENUM('INIT', 'ACTIVE', 'PAUSED', charset='utf8mb4', collation='utf8mb4_unicode_ci'),
               existing_nullable=True)
    op.alter_column('clusters', 'description',
               existing_type=sa.Text(),
               type_=mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255),
               existing_nullable=True)
    op.drop_column('clusters', 'endpoint_url')
    op.drop_column('clusters', 'config')
    op.drop_index(op.f('ix_auth_templates_id'), table_name='auth_templates')
    op.alter_column('auth_templates', 'updated_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.alter_column('auth_templates', 'created_at',
               existing_type=mysql.DATETIME(),
               server_default=None,
               existing_nullable=False)
    op.create_table('data_schemas_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_schema_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_schema_id'], ['data_schemas.id'], name='fk_rails_28bd1269c1', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_schemas_access_controls_on_data_schema_id', 'data_schemas_access_controls', ['data_schema_id'], unique=False)
    op.create_index('idx_data_schemas_access_controls_accessor_role', 'data_schemas_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('data_sets_api_key_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_api_key_versions_on_user_id', 'data_sets_api_key_versions', ['user_id'], unique=False)
    op.create_index('index_data_sets_api_key_versions_on_org_id', 'data_sets_api_key_versions', ['org_id'], unique=False)
    op.create_index('index_data_sets_api_key_versions_on_item_type_and_item_id', 'data_sets_api_key_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('rating_votes',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('vote', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('rating_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_rails_a47bf2c1e2'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_rating_votes_on_user_id', 'rating_votes', ['user_id'], unique=False)
    op.create_table('data_sources_api_key_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sources_api_key_versions_on_user_id', 'data_sources_api_key_versions', ['user_id'], unique=False)
    op.create_index('index_data_sources_api_key_versions_on_org_id', 'data_sources_api_key_versions', ['org_id'], unique=False)
    op.create_index('index_data_sources_api_key_versions_on_item_type_and_item_id', 'data_sources_api_key_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notifications_archive',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_type', mysql.ENUM('ORG', 'USER', 'DATA_FLOW', 'CUSTOM_DATA_FLOW', 'SOURCE', 'DATASET', 'SINK', 'RESOURCE', 'CATALOG_CONFIG'), nullable=True),
    sa.Column('level', mysql.ENUM('DEBUG', 'INFO', 'WARN', 'ERROR', 'RECOVERED', 'RESOLVED'), nullable=False),
    sa.Column('message_id', mysql.INTEGER(), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('message', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('read_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('timestamp', mysql.DATETIME(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_notifications_on_owner_id', 'notifications_archive', ['owner_id'], unique=False)
    op.create_index('fk_rails_95d483a57b', 'notifications_archive', ['org_id'], unique=False)
    op.create_table('data_sources_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_sources_aclv_user_id', 'data_sources_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_sources_aclv_org_id', 'data_sources_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_sources_aclv_item_type_item_id', 'data_sources_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('service_key_events',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=2048), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=2048), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('service_key_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('service_key_api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('time_of_authentication', mysql.DATETIME(), nullable=True),
    sa.Column('usage_count', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('user_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_user_versions_on_user_id', 'user_versions', ['user_id'], unique=False)
    op.create_index('index_user_versions_on_org_id', 'user_versions', ['org_id'], unique=False)
    op.create_index('index_user_versions_on_item_type_and_item_id', 'user_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('code_container_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('item_id_created_at', 'code_container_versions', ['item_id', 'created_at'], unique=False)
    op.create_index('index_code_container_versions_on_user_id', 'code_container_versions', ['user_id'], unique=False)
    op.create_index('index_code_container_versions_on_org_id', 'code_container_versions', ['org_id'], unique=False)
    op.create_index('index_code_container_versions_on_item_type_and_item_id', 'code_container_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_sets_catalog_ref_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_catalog_ref_versions_on_user_id', 'data_sets_catalog_ref_versions', ['user_id'], unique=False)
    op.create_index('index_data_sets_catalog_ref_versions_on_org_id', 'data_sets_catalog_ref_versions', ['org_id'], unique=False)
    op.create_index('index_data_sets_catalog_ref_versions_on_item_type_and_item_id', 'data_sets_catalog_ref_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('dashboard_transforms_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_dashboard_transforms_aclv_user_id', 'dashboard_transforms_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_dashboard_transforms_aclv_org_id', 'dashboard_transforms_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_dashboard_transforms_aclv_item_type_item_id', 'dashboard_transforms_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('resource_parameters',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('display_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('vendor_endpoint_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_type', mysql.ENUM('SOURCE', 'SINK'), nullable=True),
    sa.Column('data_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('order', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('allowed_values', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('global', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('custom_data_flow_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flow_versions_on_user_id', 'custom_data_flow_versions', ['user_id'], unique=False)
    op.create_index('index_custom_data_flow_versions_on_org_id', 'custom_data_flow_versions', ['org_id'], unique=False)
    op.create_index('index_custom_data_flow_versions_on_item_type_and_item_id', 'custom_data_flow_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_credentials_memberships',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('data_credentials_group_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['data_credentials_group_id'], ['data_credentials_groups.id'], name='fk_rails_ec9e674b46'),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_5096678bf4'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_credentials_memberships_on_data_credentials_id', 'data_credentials_memberships', ['data_credentials_id'], unique=False)
    op.create_index('index_data_credentials_memberships_on_data_credentials_group_id', 'data_credentials_memberships', ['data_credentials_group_id'], unique=False)
    op.create_index('data_credentials_group_members_index', 'data_credentials_memberships', ['data_credentials_group_id', 'data_credentials_id'], unique=True)
    op.create_table('flow_nodes_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('flow_node_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['flow_node_id'], ['flow_nodes.id'], name='fk_rails_be9d66ce83'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_nodes_access_controls_on_flow_node_id', 'flow_nodes_access_controls', ['flow_node_id'], unique=False)
    op.create_table('endpoint_mapping_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('{:null=>false, :limit=>191}', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_endpoint_mapping_versions_on_user_id', 'endpoint_mapping_versions', ['user_id'], unique=False)
    op.create_index('index_endpoint_mapping_versions_on_org_id', 'endpoint_mapping_versions', ['org_id'], unique=False)
    op.create_index('idx_endpoint_mapping_versions_item_type_item_id', 'endpoint_mapping_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_maps_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_maps_aclv_user_id', 'data_maps_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_maps_aclv_org_id', 'data_maps_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_maps_aclv_item_type_item_id', 'data_maps_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('semantic_schemas',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('schema', mysql.JSON(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_semantic_schemas_on_owner_id', 'semantic_schemas', ['owner_id'], unique=False)
    op.create_index('index_semantic_schemas_on_org_id_and_owner_id', 'semantic_schemas', ['org_id', 'owner_id'], unique=False)
    op.create_index('index_semantic_schemas_on_data_set_id', 'semantic_schemas', ['data_set_id'], unique=False)
    op.create_table('auth_template_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_auth_template_versions_on_user_id', 'auth_template_versions', ['user_id'], unique=False)
    op.create_index('index_auth_template_versions_on_org_id', 'auth_template_versions', ['org_id'], unique=False)
    op.create_index('index_auth_template_versions_on_item_type_and_item_id', 'auth_template_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('domain_marketplace_items',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('domain_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('marketplace_item_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['domain_id'], ['domains.id'], name='fk_rails_6926b07ff6'),
    sa.ForeignKeyConstraint(['marketplace_item_id'], ['marketplace_items.id'], name='fk_rails_94b6bfce76'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('flow_templates',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('flow_type', mysql.ENUM('auto', 'streaming', 'replication', 'in_memory', 'spark', 'cdc', 'elt', 'custom', 'rag', 'api_server'), server_default=sa.text("'streaming'"), nullable=False),
    sa.Column('template', mysql.JSON(), nullable=False),
    sa.Column('default', mysql.TINYINT(display_width=1), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_de3d897722', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_54b5554765', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_templates_on_owner_id', 'flow_templates', ['owner_id'], unique=False)
    op.create_index('index_flow_templates_on_org_id', 'flow_templates', ['org_id'], unique=False)
    op.create_index('index_flow_templates_on_name', 'flow_templates', ['name'], unique=False)
    op.create_table('dashboard_transforms',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_type', mysql.ENUM('ORG', 'USER', 'FLOW', 'SOURCE', 'PUB', 'SUB', 'DATASET', 'SINK'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_67eb1aaca1', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_6dbf6a9c88', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_dashboard_transforms_on_resource_id_and_resource_type', 'dashboard_transforms', ['resource_id', 'resource_type'], unique=True)
    op.create_index('index_dashboard_transforms_on_owner_id', 'dashboard_transforms', ['owner_id'], unique=False)
    op.create_index('dashboard_transforms_resource_type', 'dashboard_transforms', ['resource_type'], unique=False)
    op.create_index('dashboard_transforms_resource_id', 'dashboard_transforms', ['resource_id'], unique=False)
    op.create_table('flow_trigger_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_trigger_versions_on_user_id', 'flow_trigger_versions', ['user_id'], unique=False)
    op.create_index('index_flow_trigger_versions_on_org_id', 'flow_trigger_versions', ['org_id'], unique=False)
    op.create_index('idx_flow_trigger_versions_item_type_item_id', 'flow_trigger_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_credentials_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_credentials_aclv_user_id', 'data_credentials_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_credentials_aclv_org_id', 'data_credentials_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_credentials_aclv_item_type_item_id', 'data_credentials_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('org_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_org_versions_on_user_id', 'org_versions', ['user_id'], unique=False)
    op.create_index('index_org_versions_on_org_id', 'org_versions', ['org_id'], unique=False)
    op.create_index('index_org_versions_on_item_type_and_item_id', 'org_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notification_channel_settings_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('notification_channel_setting_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['accessor_org_id'], ['orgs.id'], name='fk_rails_df26831a49', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['notification_channel_setting_id'], ['notification_channel_settings.id'], name='fk_rails_547e3ba63c', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('notification_settings_acl_accessor_id_type_roles', 'notification_channel_settings_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_index('idx_notification_channel_settings_access_controls_accessor_role', 'notification_channel_settings_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('custom_data_flows_data_credentials',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('custom_data_flow_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['custom_data_flow_id'], ['custom_data_flows.id'], name='fk_rails_019229991a', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_e912cb9a19', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flows_data_credentials_on_custom_data_flow_id', 'custom_data_flows_data_credentials', ['custom_data_flow_id'], unique=False)
    op.create_table('notification_settings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('channel', mysql.ENUM('APP', 'EMAIL', 'SMS', 'SLACK', 'WEBHOOKS'), nullable=True),
    sa.Column('status', mysql.ENUM('PAUSED', 'ACTIVE'), nullable=True),
    sa.Column('notification_resource_type', mysql.ENUM('ORG', 'USER', 'DATA_FLOW', 'CUSTOM_DATA_FLOW', 'SOURCE', 'DATASET', 'SINK', 'RESOURCE', 'CATALOG_CONFIG'), server_default=sa.text("'USER'"), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('priority', mysql.INTEGER(), server_default=sa.text("'1'"), autoincrement=False, nullable=True),
    sa.Column('notification_channel_setting_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('notification_type_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['notification_channel_setting_id'], ['notification_channel_settings.id'], name='fk_rails_4601688210', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['notification_type_id'], ['notification_types.id'], name='fk_rails_22aa8e70e5', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_33b09a93d5', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_ce56413a55', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('notification_settings_resource_id_owner_id', 'notification_settings', ['resource_id', 'owner_id', 'notification_resource_type'], unique=False)
    op.create_index('notification_settings_resource_id', 'notification_settings', ['resource_id'], unique=False)
    op.create_index('notification_settings_notification_resource_type', 'notification_settings', ['notification_resource_type'], unique=False)
    op.create_index('index_notification_settings_on_owner_id', 'notification_settings', ['owner_id'], unique=False)
    op.create_table('schema_migrations',
    sa.Column('version', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('unique_schema_migrations', 'schema_migrations', ['version'], unique=True)
    op.create_table('notification_settings_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_notification_settings_aclv_user_id', 'notification_settings_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_notification_settings_aclv_org_id', 'notification_settings_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_notification_settings_aclv_item_type_item_id', 'notification_settings_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('custom_data_flows_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('custom_data_flow_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['custom_data_flow_id'], ['custom_data_flows.id'], name='fk_rails_9ece386171', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flows_access_controls_on_custom_data_flow_id', 'custom_data_flows_access_controls', ['custom_data_flow_id'], unique=False)
    op.create_index('idx_custom_data_flows_access_controls_accessor_role', 'custom_data_flows_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('code_containers_data_maps',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_map_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_containers_data_maps_on_data_map_id', 'code_containers_data_maps', ['data_map_id'], unique=False)
    op.create_index('index_code_containers_data_maps_on_code_container_id', 'code_containers_data_maps', ['code_container_id'], unique=False)
    op.create_table('user_tier_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_user_tier_versions_on_user_id', 'user_tier_versions', ['user_id'], unique=False)
    op.create_index('index_user_tier_versions_on_org_id', 'user_tier_versions', ['org_id'], unique=False)
    op.create_index('index_user_tier_versions_on_item_type_and_item_id', 'user_tier_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('custom_data_flows_code_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('custom_data_flow_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['code_container_id'], ['code_containers.id'], name='fk_rails_cfd2554126', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['custom_data_flow_id'], ['custom_data_flows.id'], name='fk_rails_acbcebc5b9', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flows_code_containers_on_custom_data_flow_id', 'custom_data_flows_code_containers', ['custom_data_flow_id'], unique=False)
    op.create_table('notifications',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_type', mysql.ENUM('SOURCE', 'PUB', 'SUB', 'DATASET', 'SINK', 'USER', 'ORG', 'CUSTOM_DATA_FLOW', 'DATA_FLOW', 'CATALOG_CONFIG', 'APPROVAL_STEP'), nullable=True),
    sa.Column('level', mysql.ENUM('DEBUG', 'INFO', 'WARN', 'ERROR', 'RECOVERED', 'RESOLVED'), nullable=False),
    sa.Column('message_id', mysql.INTEGER(), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('message', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('read_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('timestamp', mysql.DATETIME(), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_95d483a57b', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_c99e9ae0ea', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_notifications_on_owner_id_and_timestamp', 'notifications', ['owner_id', 'timestamp'], unique=False)
    op.create_index('index_notifications_on_owner_id', 'notifications', ['owner_id'], unique=False)
    op.create_index('idx_notifications_sort_timestamp', 'notifications', ['owner_id', 'org_id', 'timestamp', 'level'], unique=False)
    op.create_index('idx_notifications_sort_created_at', 'notifications', ['owner_id', 'org_id', 'created_at', 'level'], unique=False)
    op.create_index('idx_notifications_res_type', 'notifications', ['resource_type'], unique=False)
    op.create_index('idx_notifications_res_id_type_updated', 'notifications', ['resource_id', 'resource_type', 'updated_at'], unique=False)
    op.create_index('idx_notifications_res_id_type', 'notifications', ['resource_id', 'resource_type'], unique=False)
    op.create_index('idx_notifications_res_id', 'notifications', ['resource_id'], unique=False)
    op.create_table('data_sets_catalog_refs',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('catalog_config_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('status', mysql.ENUM('PENDING', 'DONE', 'ERROR'), server_default=sa.text("'PENDING'"), nullable=True),
    sa.Column('reference_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('link', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('error_msg', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['catalog_config_id'], ['catalog_configs.id'], name='fk_rails_3970c795de'),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_4bcfa446f1'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_catalog_refs_on_data_set_id', 'data_sets_catalog_refs', ['data_set_id'], unique=False)
    op.create_index('index_data_sets_catalog_refs_on_catalog_config_id', 'data_sets_catalog_refs', ['catalog_config_id'], unique=False)
    op.create_table('gen_ai_config_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_gen_ai_config_versions_on_user_id', 'gen_ai_config_versions', ['user_id'], unique=False)
    op.create_index('index_gen_ai_config_versions_on_org_id', 'gen_ai_config_versions', ['org_id'], unique=False)
    op.create_index('index_gen_ai_config_versions_on_item_type_and_item_id', 'gen_ai_config_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('flow_nodes_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('flow_node_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_5c07d585fe'),
    sa.ForeignKeyConstraint(['flow_node_id'], ['flow_nodes.id'], name='fk_rails_08c4f93803'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_nodes_doc_containers_on_flow_node_id', 'flow_nodes_doc_containers', ['flow_node_id'], unique=False)
    op.create_index('index_flow_nodes_doc_containers_on_doc_container_id', 'flow_nodes_doc_containers', ['doc_container_id'], unique=False)
    op.create_table('async_tasks',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('task_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('priority', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('arguments', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('status', mysql.ENUM('pending', 'running', 'completed', 'failed', 'cancelled'), server_default=sa.text("'pending'"), nullable=True),
    sa.Column('error', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('progress', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('result', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('result_url', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('started_at', mysql.DATETIME(), nullable=True),
    sa.Column('stopped_at', mysql.DATETIME(), nullable=True),
    sa.Column('retries_count', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('acknowledged_at', mysql.TIMESTAMP(), nullable=True),
    sa.Column('base_cluster_uid', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('result_purged', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('should_be_killed', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('request_data', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('result_url_created_at', mysql.DATETIME(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('async_task_idx2', 'async_tasks', ['status', 'result_purged', 'stopped_at'], unique=False)
    op.create_index('async_task_idx1', 'async_tasks', ['status', 'org_id', 'owner_id', 'task_type'], unique=False)
    op.create_table('data_maps',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('public', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('data_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('data_format', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('emit_data_default', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True),
    sa.Column('use_versioning', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True),
    sa.Column('data_default', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('data_defaults', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('data_map', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('map_entry_count', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('map_entry_schema', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('map_primary_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_698c24d7cd', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_8ac8b7d0eb', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_maps_on_owner_id', 'data_maps', ['owner_id'], unique=False)
    op.create_table('team_memberships',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('team_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_team_memberships_on_user_id', 'team_memberships', ['user_id'], unique=False)
    op.create_index('index_team_memberships_on_team_id', 'team_memberships', ['team_id'], unique=False)
    op.create_table('data_sets_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'INIT'"), nullable=True),
    sa.Column('notified_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_f70080ab2f', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_access_controls_on_data_set_id', 'data_sets_access_controls', ['data_set_id'], unique=False)
    op.create_index('idx_data_sets_access_controls_accessor_role', 'data_sets_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_index('data_sets_acl_accessor_id_type_roles', 'data_sets_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_table('teams_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('team_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['team_id'], ['teams.id'], name='fk_rails_49b2b11514', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('teams_acl_accessor_id_type_roles', 'teams_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_index('index_teams_access_controls_on_team_id', 'teams_access_controls', ['team_id'], unique=False)
    op.create_index('idx_teams_access_controls_accessor_role', 'teams_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('notification_settings_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('notification_setting_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['accessor_org_id'], ['orgs.id'], name='fk_rails_c6ca26092f', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['notification_setting_id'], ['notification_settings.id'], name='fk_rails_25a52cec0a', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('notification_settings_acl_accessor_id_type_roles', 'notification_settings_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_index('idx_notification_settings_access_controls_accessor_role', 'notification_settings_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('orchestration_event_types',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_orchestration_event_types_on_type', 'orchestration_event_types', ['type'], unique=False)
    op.create_table('users_api_keys',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'ACTIVE'"), nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('last_rotated_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('last_rotated_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_users_api_keys_on_user_id', 'users_api_keys', ['user_id'], unique=False)
    op.create_index('index_users_api_keys_on_owner_id', 'users_api_keys', ['owner_id'], unique=False)
    op.create_index('index_users_api_keys_on_api_key', 'users_api_keys', ['api_key'], unique=False)
    op.create_table('self_signup_requests',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('full_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('PENDING', 'EMAIL_VERIFIED', 'APPROVED', 'REJECTED'), server_default=sa.text("'PENDING'"), nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('reviewed_by_user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('email_verified_at', mysql.DATETIME(), nullable=True),
    sa.Column('approved_at', mysql.DATETIME(), nullable=True),
    sa.Column('email_verification_token', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('email_verification_token_expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('invite_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_self_signup_requests_on_email_verification_token', 'self_signup_requests', ['email_verification_token'], unique=False)
    op.create_table('cluster_endpoint_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_cluster_endpoint_versions_on_user_id', 'cluster_endpoint_versions', ['user_id'], unique=False)
    op.create_index('index_cluster_endpoint_versions_on_org_id', 'cluster_endpoint_versions', ['org_id'], unique=False)
    op.create_index('index_cluster_endpoint_versions_on_item_type_and_item_id', 'cluster_endpoint_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('dashboard_transforms_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('dashboard_transform_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['accessor_org_id'], ['orgs.id'], name='fk_rails_e767564e54', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['dashboard_transform_id'], ['dashboard_transforms.id'], name='fk_rails_6ba5ef59e6', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_dashboard_transforms_access_controls_accessor_role', 'dashboard_transforms_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('orgs_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_cf34b86eaf', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('orgs_acl_accessor_id_type_roles', 'orgs_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_index('index_orgs_access_controls_on_org_id', 'orgs_access_controls', ['org_id'], unique=False)
    op.create_index('idx_orgs_access_controls_accessor_role', 'orgs_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('taggings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('tag_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('taggable_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('taggable_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('tagger_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('tagger_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('context', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=128), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('taggings_idy', 'taggings', ['taggable_id', 'taggable_type', 'tagger_id', 'context'], unique=False)
    op.create_index('taggings_idx', 'taggings', ['tag_id', 'taggable_id', 'taggable_type', 'context', 'tagger_id', 'tagger_type'], unique=True)
    op.create_index('index_taggings_on_tagger_id_and_tagger_type', 'taggings', ['tagger_id', 'tagger_type'], unique=False)
    op.create_index('index_taggings_on_tagger_id', 'taggings', ['tagger_id'], unique=False)
    op.create_index('index_taggings_on_taggable_type', 'taggings', ['taggable_type'], unique=False)
    op.create_index('index_taggings_on_taggable_id_and_taggable_type_and_context', 'taggings', ['taggable_id', 'taggable_type', 'context'], unique=False)
    op.create_index('index_taggings_on_taggable_id', 'taggings', ['taggable_id'], unique=False)
    op.create_index('index_taggings_on_tag_id', 'taggings', ['tag_id'], unique=False)
    op.create_index('index_taggings_on_context', 'taggings', ['context'], unique=False)
    op.create_table('gen_ai_configs',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('ACTIVE', 'PAUSED'), server_default=sa.text("'ACTIVE'"), nullable=False),
    sa.Column('type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('config', mysql.LONGTEXT(collation='utf8mb4_unicode_ci'), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_487d1eccd4'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_28f5b3fe8b'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_cb71f0b653'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_gen_ai_configs_on_owner_id', 'gen_ai_configs', ['owner_id'], unique=False)
    op.create_index('index_gen_ai_configs_on_org_id', 'gen_ai_configs', ['org_id'], unique=False)
    op.create_index('index_gen_ai_configs_on_data_credentials_id', 'gen_ai_configs', ['data_credentials_id'], unique=False)
    op.create_table('users_api_key_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_users_api_key_versions_on_user_id', 'users_api_key_versions', ['user_id'], unique=False)
    op.create_index('index_users_api_key_versions_on_org_id', 'users_api_key_versions', ['org_id'], unique=False)
    op.create_index('index_users_api_key_versions_on_item_type_and_item_id', 'users_api_key_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notification_channel_settings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('channel', mysql.ENUM('APP', 'EMAIL', 'SMS', 'SLACK', 'WEBHOOKS'), nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_5838140e6f', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_1cd8878fa4', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_notification_channel_settings_on_owner_id', 'notification_channel_settings', ['owner_id'], unique=False)
    op.create_table('data_credentials_groups_access_controls',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('data_credentials_group_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['data_credentials_group_id'], ['data_credentials_groups.id'], name='fk_rails_65e09e7b38'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('credentials_groups_access_control_index', 'data_credentials_groups_access_controls', ['data_credentials_group_id'], unique=False)
    op.create_table('approval_requests',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('requestor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('topic_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('topic_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('request_type', mysql.ENUM('marketplace_item', 'marketplace_item_access'), nullable=False),
    sa.Column('status', mysql.ENUM('pending', 'approved', 'rejected'), server_default=sa.text("'pending'"), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['requestor_id'], ['users.id'], name='fk_rails_93b3868b48'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('domains',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('parent_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_4b4619ab50'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_domains_on_parent_id', 'domains', ['parent_id'], unique=False)
    op.create_table('resources_references_origins',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('resources_reference_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_resources_references_origins_on_origin', 'resources_references_origins', ['origin_node_id'], unique=False)
    op.create_table('data_maps_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_map_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_map_id'], ['data_maps.id'], name='fk_rails_569c706902'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_b70fdcd428'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_maps_doc_containers_on_doc_container_id', 'data_maps_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_data_maps_doc_containers_on_data_map_id', 'data_maps_doc_containers', ['data_map_id'], unique=False)
    op.create_table('code_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('runtime_data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('reusable', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('public', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('resource_type', mysql.ENUM('source', 'sink', 'transform', 'error', 'validator', 'source_custom', 'ai_function', 'splitter'), server_default=sa.text("'transform'"), nullable=False),
    sa.Column('output_type', mysql.ENUM('record', 'attribute', 'custom'), server_default=sa.text("'record'"), nullable=False),
    sa.Column('code_type', mysql.ENUM('jolt_standard', 'jolt_custom', 'python', 'python3', 'javascript', 'javascript_es6', 'flink_sql', 'spark_sql'), server_default=sa.text("'jolt_standard'"), nullable=False),
    sa.Column('code_encoding', mysql.ENUM('none', 'base64'), server_default=sa.text("'none'"), nullable=False),
    sa.Column('code_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('code', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('referenced_resources_enabled', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('custom_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('repo_type', mysql.ENUM('embedded', 'github'), server_default=sa.text("'embedded'"), nullable=False),
    sa.Column('repo_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('ai_function_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=32), nullable=True),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_d393c1ff7c', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_7ade10d91f', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_0ba2d84399', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['runtime_data_credentials_id'], ['data_credentials.id'], name='fk_rails_d29f6bfa1a'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_containers_on_owner_id', 'code_containers', ['owner_id'], unique=False)
    op.create_table('data_maps_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_map_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_map_id'], ['data_maps.id'], name='fk_rails_7bd9a042bf', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_maps_access_controls_on_data_map_id', 'data_maps_access_controls', ['data_map_id'], unique=False)
    op.create_index('idx_data_maps_access_controls_accessor_role', 'data_maps_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_index('data_maps_acl_accessor_id_type_roles', 'data_maps_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_table('api_key_events',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('api_key_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('api_key_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('api_key_api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('time_of_authentication', mysql.DATETIME(), nullable=False),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('usage_count', mysql.INTEGER(), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_aafe160167'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_api_key_events_on_owner_id', 'api_key_events', ['owner_id'], unique=False)
    op.create_index('index_api_key_events_on_org_id', 'api_key_events', ['org_id'], unique=False)
    op.create_table('ar_internal_metadata',
    sa.Column('key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('value', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('key'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('custom_data_flows_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_custom_data_flows_aclv_user_id', 'custom_data_flows_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_custom_data_flows_aclv_org_id', 'custom_data_flows_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_custom_data_flows_aclv_item_type_item_id', 'custom_data_flows_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('async_task_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_async_task_versions_on_user_id', 'async_task_versions', ['user_id'], unique=False)
    op.create_index('index_async_task_versions_on_org_id', 'async_task_versions', ['org_id'], unique=False)
    op.create_index('index_async_task_versions_on_item_type_and_item_id', 'async_task_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('quarantine_settings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('resource_type', mysql.ENUM('ORG', 'USER', 'FLOW', 'PIPELINE', 'DATA_FLOW', 'CUSTOM_DATA_FLOW', 'SOURCE', 'PUB', 'SUB', 'DATASET', 'SINK'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_ca5aa2122a', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_7c77baeb79', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('quarantine_settings_resource_type', 'quarantine_settings', ['resource_type'], unique=False)
    op.create_index('quarantine_settings_resource_id', 'quarantine_settings', ['resource_id'], unique=False)
    op.create_index('quarantine_settings_res_id_type_org_id', 'quarantine_settings', ['org_id', 'resource_id', 'resource_type'], unique=True)
    op.create_index('index_quarantine_settings_on_owner_id', 'quarantine_settings', ['owner_id'], unique=False)
    op.create_table('notification_channel_settings_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_notification_channel_settings_aclv_user_id', 'notification_channel_settings_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_notification_channel_settings_aclv_org_id', 'notification_channel_settings_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_notification_channel_settings_aclv_item_type_item_id', 'notification_channel_settings_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('code_containers_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_code_containers_aclv_user_id', 'code_containers_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_code_containers_aclv_org_id', 'code_containers_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_code_containers_aclv_item_type_item_id', 'code_containers_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('flow_nodes_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_flow_nodes_aclv_user_id', 'flow_nodes_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_flow_nodes_aclv_org_id', 'flow_nodes_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_flow_nodes_aclv_item_type_item_id', 'flow_nodes_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notifications_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_notifications_aclv_user_id', 'notifications_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_notifications_aclv_org_id', 'notifications_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_notifications_aclv_item_type_item_id', 'notifications_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('resource_parameter_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_resource_parameter_versions_on_user_id', 'resource_parameter_versions', ['user_id'], unique=False)
    op.create_index('index_resource_parameter_versions_on_org_id', 'resource_parameter_versions', ['org_id'], unique=False)
    op.create_index('index_resource_parameter_versions_on_item_type_and_item_id', 'resource_parameter_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('teams_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('team_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_e442fcde08'),
    sa.ForeignKeyConstraint(['team_id'], ['teams.id'], name='fk_rails_c8183a3717'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_teams_doc_containers_on_team_id', 'teams_doc_containers', ['team_id'], unique=False)
    op.create_index('index_teams_doc_containers_on_doc_container_id', 'teams_doc_containers', ['doc_container_id'], unique=False)
    op.create_table('runtime_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_runtime_versions_on_user_id', 'runtime_versions', ['user_id'], unique=False)
    op.create_index('index_runtime_versions_on_org_id', 'runtime_versions', ['org_id'], unique=False)
    op.create_index('idx_runtime_versions_item_type_item_id', 'runtime_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_sources_api_keys',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'ACTIVE'"), nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('last_rotated_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('last_rotated_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sources_api_keys_on_owner_id', 'data_sources_api_keys', ['owner_id'], unique=False)
    op.create_index('index_data_sources_api_keys_on_data_source_id', 'data_sources_api_keys', ['data_source_id'], unique=False)
    op.create_index('index_data_sources_api_keys_on_api_key', 'data_sources_api_keys', ['api_key'], unique=False)
    op.create_table('approval_steps',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('approval_request_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('assignee_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('step_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('pending', 'approved', 'rejected'), server_default=sa.text("'pending'"), nullable=False),
    sa.Column('result', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['approval_request_id'], ['approval_requests.id'], name='fk_rails_aeeea60f3a'),
    sa.ForeignKeyConstraint(['assignee_id'], ['users.id'], name='fk_rails_54b5053e2b'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('data_credentials_groups_access_control_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_credentials_groups_aclv_user_id', 'data_credentials_groups_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_credentials_groups_aclv_org_id', 'data_credentials_groups_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_credentials_groups_aclv_item_type_item_id', 'data_credentials_groups_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('code_containers_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['code_container_id'], ['code_containers.id'], name='fk_rails_04dbaa3c86'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_7395df33bd'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_containers_doc_containers_on_doc_container_id', 'code_containers_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_code_containers_doc_containers_on_code_container_id', 'code_containers_doc_containers', ['code_container_id'], unique=False)
    op.create_table('teams_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_teams_aclv_user_id', 'teams_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_teams_aclv_org_id', 'teams_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_teams_aclv_item_type_item_id', 'teams_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('endpoint_specs',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('method', mysql.ENUM('GET', 'POST', 'PUT', 'PATCH', 'DELETE'), server_default=sa.text("'GET'"), nullable=False),
    sa.Column('route', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('headers', mysql.JSON(), nullable=True),
    sa.Column('path_params', mysql.JSON(), nullable=True),
    sa.Column('query_params', mysql.JSON(), nullable=True),
    sa.Column('body', mysql.JSON(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_5f463eaa3c', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_8a2d510b5e', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_a49c88e6a6', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_endpoint_specs_on_owner_id', 'endpoint_specs', ['owner_id'], unique=False)
    op.create_index('index_endpoint_specs_on_org_id', 'endpoint_specs', ['org_id'], unique=False)
    op.create_index('index_endpoint_specs_on_data_set_id', 'endpoint_specs', ['data_set_id'], unique=False)
    op.create_table('data_sets_api_keys',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'ACTIVE'"), nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('last_rotated_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('last_rotated_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_api_keys_on_owner_id', 'data_sets_api_keys', ['owner_id'], unique=False)
    op.create_index('index_data_sets_api_keys_on_data_set_id', 'data_sets_api_keys', ['data_set_id'], unique=False)
    op.create_index('index_data_sets_api_keys_on_api_key', 'data_sets_api_keys', ['api_key'], unique=False)
    op.create_table('service_keys',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'INIT'"), nullable=True),
    sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('last_rotated_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('last_rotated_at', mysql.DATETIME(), nullable=True),
    sa.Column('external_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_76f801a642'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_service_keys_on_user_id', 'service_keys', ['user_id'], unique=False)
    op.create_index('index_service_keys_on_owner_id_and_org_id', 'service_keys', ['owner_id', 'org_id'], unique=False)
    op.create_index('index_service_keys_on_owner_id', 'service_keys', ['owner_id'], unique=False)
    op.create_index('index_service_keys_on_org_id', 'service_keys', ['org_id'], unique=False)
    op.create_index('index_service_keys_on_external_id', 'service_keys', ['external_id'], unique=False)
    op.create_index('index_service_keys_on_data_source_id', 'service_keys', ['data_source_id'], unique=False)
    op.create_index('index_service_keys_on_api_key', 'service_keys', ['api_key'], unique=False)
    op.create_table('domain_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_domain_versions_on_user_id', 'domain_versions', ['user_id'], unique=False)
    op.create_index('index_domain_versions_on_org_id', 'domain_versions', ['org_id'], unique=False)
    op.create_index('index_domain_versions_on_item_type_and_item_id', 'domain_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('auth_parameters',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('display_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('vendor_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('auth_template_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('order', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('allowed_values', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('global', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('secured', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['auth_template_id'], ['auth_templates.id'], name='fk_rails_cc1a0ae8ed'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('external_sharers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('org_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('team_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('notified_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_external_sharers_on_email', 'external_sharers', ['email'], unique=False)
    op.create_index('index_external_sharers_on_data_set_id', 'external_sharers', ['data_set_id'], unique=False)
    op.create_table('custom_data_flows_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('custom_data_flow_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['custom_data_flow_id'], ['custom_data_flows.id'], name='fk_rails_8ae35fb264'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_f5f7f86681'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flows_doc_containers_on_doc_container_id', 'custom_data_flows_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_custom_data_flows_doc_containers_on_custom_data_flow_id', 'custom_data_flows_doc_containers', ['custom_data_flow_id'], unique=False)
    op.create_table('data_sinks_api_key_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sinks_api_key_versions_on_user_id', 'data_sinks_api_key_versions', ['user_id'], unique=False)
    op.create_index('index_data_sinks_api_key_versions_on_org_id', 'data_sinks_api_key_versions', ['org_id'], unique=False)
    op.create_index('index_data_sinks_api_key_versions_on_item_type_and_item_id', 'data_sinks_api_key_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('doc_container_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_doc_container_versions_on_user_id', 'doc_container_versions', ['user_id'], unique=False)
    op.create_index('index_doc_container_versions_on_org_id', 'doc_container_versions', ['org_id'], unique=False)
    op.create_index('index_doc_container_versions_on_item_type_and_item_id', 'doc_container_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('vendor_endpoints',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('display_name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('vendor_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('source_template', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('sink_template', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('code_containers_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('code_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['code_container_id'], ['code_containers.id'], name='fk_rails_b9455e27dc', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_containers_access_controls_on_code_container_id', 'code_containers_access_controls', ['code_container_id'], unique=False)
    op.create_index('idx_code_containers_access_controls_accessor_role', 'code_containers_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('data_map_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_map_versions_on_user_id', 'data_map_versions', ['user_id'], unique=False)
    op.create_index('index_data_map_versions_on_org_id', 'data_map_versions', ['org_id'], unique=False)
    op.create_index('index_data_map_versions_on_item_type_and_item_id', 'data_map_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('projects_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('project_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], name='fk_rails_3bc6903ea2'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_projects_access_controls_on_project_id', 'projects_access_controls', ['project_id'], unique=False)
    op.create_index('idx_projects_access_controls_accessor_role', 'projects_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('data_sets_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_5b98773f65'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_da671d338e'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_doc_containers_on_doc_container_id', 'data_sets_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_data_sets_doc_containers_on_data_set_id', 'data_sets_doc_containers', ['data_set_id'], unique=False)
    op.create_table('api_cronjobs',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('descriptor', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('window_seconds', mysql.INTEGER(), server_default=sa.text("'60'"), autoincrement=False, nullable=False),
    sa.Column('last_performed', mysql.DATETIME(), nullable=True),
    sa.Column('enabled', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_api_cronjobs_on_descriptor', 'api_cronjobs', ['descriptor'], unique=True)
    op.create_table('org_custodian_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_org_custodian_versions_on_user_id', 'org_custodian_versions', ['user_id'], unique=False)
    op.create_index('index_org_custodian_versions_on_org_id', 'org_custodian_versions', ['org_id'], unique=False)
    op.create_index('index_org_custodian_versions_on_item_type_and_item_id', 'org_custodian_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('user_settings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_settings_type_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('primary_key_value', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('settings', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_user_settings_on_user_settings_type_id', 'user_settings', ['user_settings_type_id'], unique=False)
    op.create_index('index_user_settings_on_primary_key_value', 'user_settings', ['primary_key_value'], unique=False)
    op.create_index('index_user_settings_on_owner_id', 'user_settings', ['owner_id'], unique=False)
    op.create_table('data_set_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('item_id_created_at', 'data_set_versions', ['item_id', 'created_at'], unique=False)
    op.create_index('index_data_set_versions_on_user_id', 'data_set_versions', ['user_id'], unique=False)
    op.create_index('index_data_set_versions_on_org_id', 'data_set_versions', ['org_id'], unique=False)
    op.create_index('index_data_set_versions_on_item_type_and_item_id', 'data_set_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('doc_type', mysql.ENUM('txt', 'rft', 'md'), server_default=sa.text("'txt'"), nullable=False),
    sa.Column('public', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('repo_type', mysql.ENUM('embedded', 'github'), server_default=sa.text("'embedded'"), nullable=False),
    sa.Column('repo_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('text', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_4d052b1722'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_cec0d770b4'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_3c6f6b864f'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_doc_containers_on_owner_id', 'doc_containers', ['owner_id'], unique=False)
    op.create_table('service_key_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_service_key_versions_on_user_id', 'service_key_versions', ['user_id'], unique=False)
    op.create_index('index_service_key_versions_on_org_id', 'service_key_versions', ['org_id'], unique=False)
    op.create_index('index_service_key_versions_on_item_type_and_item_id', 'service_key_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('gen_ai_org_setting_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_gen_ai_org_setting_versions_on_user_id', 'gen_ai_org_setting_versions', ['user_id'], unique=False)
    op.create_index('index_gen_ai_org_setting_versions_on_org_id', 'gen_ai_org_setting_versions', ['org_id'], unique=False)
    op.create_index('idx_gen_ai_org_setting_versions_item_type_item_id', 'gen_ai_org_setting_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_sinks_api_keys',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'ACTIVE'"), nullable=True),
    sa.Column('scope', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('api_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('last_rotated_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('last_rotated_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sinks_api_keys_on_owner_id', 'data_sinks_api_keys', ['owner_id'], unique=False)
    op.create_index('index_data_sinks_api_keys_on_data_sink_id', 'data_sinks_api_keys', ['data_sink_id'], unique=False)
    op.create_index('index_data_sinks_api_keys_on_api_key', 'data_sinks_api_keys', ['api_key'], unique=False)
    op.create_table('api_auth_configs',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('uid', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=24), nullable=False),
    sa.Column('protocol', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'saml'"), nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('global', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('auto_create_users_enabled', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True),
    sa.Column('name_identifier_format', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('nexla_base_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('assertion_consumer_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('service_entity_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('idp_entity_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('idp_sso_target_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('idp_slo_target_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('idp_cert', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('security_settings', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('metadata', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('oidc_domain', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('oidc_keys_url_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('oidc_id_claims', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('oidc_access_claims', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('client_config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('secret_config_enc', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('secret_config_enc_iv', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_ab6ad2e133', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_api_auth_configs_on_uid', 'api_auth_configs', ['uid'], unique=False)
    op.create_index('index_api_auth_configs_on_secret_config_enc_iv', 'api_auth_configs', ['secret_config_enc_iv'], unique=True)
    op.create_index('index_api_auth_configs_on_owner_id', 'api_auth_configs', ['owner_id'], unique=False)
    op.create_index('index_api_auth_configs_on_org_id', 'api_auth_configs', ['org_id'], unique=False)
    op.create_table('org_tier_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_org_tier_versions_on_user_id', 'org_tier_versions', ['user_id'], unique=False)
    op.create_index('index_org_tier_versions_on_org_id', 'org_tier_versions', ['org_id'], unique=False)
    op.create_index('index_org_tier_versions_on_item_type_and_item_id', 'org_tier_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('flow_triggers',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('status', mysql.ENUM('ACTIVE', 'PAUSED'), server_default=sa.text("'ACTIVE'"), nullable=False),
    sa.Column('triggering_event_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('triggering_flow_node_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('triggering_origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('triggered_event_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('triggered_origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_108d3c9e70'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_3d65de2753'),
    sa.ForeignKeyConstraint(['triggered_event_type'], ['orchestration_event_types.type'], name='fk_rails_51a09aa733'),
    sa.ForeignKeyConstraint(['triggered_origin_node_id'], ['flow_nodes.id'], name='fk_rails_0d19bb35e1'),
    sa.ForeignKeyConstraint(['triggering_event_type'], ['orchestration_event_types.type'], name='fk_rails_0b1150c7ac'),
    sa.ForeignKeyConstraint(['triggering_flow_node_id'], ['flow_nodes.id'], name='fk_rails_df8c81c3a6'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_triggers_on_triggering_flow_node_id', 'flow_triggers', ['triggering_flow_node_id'], unique=False)
    op.create_index('index_flow_triggers_on_triggering_event_type', 'flow_triggers', ['triggering_event_type'], unique=False)
    op.create_index('index_flow_triggers_on_triggered_origin_node_id', 'flow_triggers', ['triggered_origin_node_id'], unique=False)
    op.create_index('index_flow_triggers_on_triggered_event_type', 'flow_triggers', ['triggered_event_type'], unique=False)
    op.create_index('index_flow_triggers_on_owner_id', 'flow_triggers', ['owner_id'], unique=False)
    op.create_table('doc_containers_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_b0603065c5'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_doc_containers_access_controls_on_doc_container_id', 'doc_containers_access_controls', ['doc_container_id'], unique=False)
    op.create_index('idx_doc_containers_access_controls_accessor_role', 'doc_containers_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('quarantine_settings_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_quarantine_settings_aclv_user_id', 'quarantine_settings_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_quarantine_settings_aclv_org_id', 'quarantine_settings_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_quarantine_settings_aclv_item_type_item_id', 'quarantine_settings_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('endpoint_spec_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('{:null=>false, :limit=>191}', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_endpoint_spec_versions_on_user_id', 'endpoint_spec_versions', ['user_id'], unique=False)
    op.create_index('index_endpoint_spec_versions_on_org_id', 'endpoint_spec_versions', ['org_id'], unique=False)
    op.create_index('idx_endpoint_spec_versions_item_type_item_id', 'endpoint_spec_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('catalog_configs_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('catalog_config_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['catalog_config_id'], ['catalog_configs.id'], name='fk_rails_03fe6f7b1e'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_637b6ec023'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_catalog_configs_doc_containers_on_doc_container_id', 'catalog_configs_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_catalog_configs_doc_containers_on_catalog_config_id', 'catalog_configs_doc_containers', ['catalog_config_id'], unique=False)
    op.create_table('vendor_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_vendor_versions_on_user_id', 'vendor_versions', ['user_id'], unique=False)
    op.create_index('index_vendor_versions_on_org_id', 'vendor_versions', ['org_id'], unique=False)
    op.create_index('index_vendor_versions_on_item_type_and_item_id', 'vendor_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('domain_custodians',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('domain_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('status', mysql.ENUM('active', 'deactivated'), server_default=sa.text("'active'"), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_cbb8833758'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_rails_ef3017569d'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_domain_custodians_on_user_id', 'domain_custodians', ['user_id'], unique=False)
    op.create_index('index_domain_custodians_on_org_id', 'domain_custodians', ['org_id'], unique=False)
    op.create_index('index_domain_custodians_on_domain_id', 'domain_custodians', ['domain_id'], unique=False)
    op.create_table('domain_marketplace_item_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_domain_marketplace_item_versions_on_user_id', 'domain_marketplace_item_versions', ['user_id'], unique=False)
    op.create_index('index_domain_marketplace_item_versions_on_org_id', 'domain_marketplace_item_versions', ['org_id'], unique=False)
    op.create_index('index_domain_marketplace_item_versions_on_item_type_and_item_id', 'domain_marketplace_item_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('code_filter_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_filter_versions_on_user_id', 'code_filter_versions', ['user_id'], unique=False)
    op.create_index('index_code_filter_versions_on_org_id', 'code_filter_versions', ['org_id'], unique=False)
    op.create_index('index_code_filter_versions_on_item_type_and_item_id', 'code_filter_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('gen_ai_org_settings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('gen_ai_config_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('gen_ai_usage', mysql.ENUM('gen_docs', 'code_check', 'all'), nullable=False),
    sa.Column('global', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['gen_ai_config_id'], ['gen_ai_configs.id'], name='fk_rails_14337450bf'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_fb1cee8cf0'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('orgs_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_orgs_aclv_user_id', 'orgs_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_orgs_aclv_org_id', 'orgs_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_orgs_aclv_item_type_item_id', 'orgs_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('resources_references',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('referencing_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('referencing_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('referenced_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('referenced_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_resources_references_on_referenced', 'resources_references', ['referenced_type', 'referenced_id'], unique=False)
    op.create_index('index_resources_references_on_org_id', 'resources_references', ['org_id'], unique=False)
    op.create_index('index_resources_references_on_hibryd', 'resources_references', ['referencing_type', 'referencing_id', 'referenced_type'], unique=False)
    op.create_table('doc_containers_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_doc_containers_aclv_user_id', 'doc_containers_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_doc_containers_aclv_org_id', 'doc_containers_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_doc_containers_aclv_item_type_item_id', 'doc_containers_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('domain_custodian_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_domain_custodian_versions_on_user_id', 'domain_custodian_versions', ['user_id'], unique=False)
    op.create_index('index_domain_custodian_versions_on_org_id', 'domain_custodian_versions', ['org_id'], unique=False)
    op.create_index('index_domain_custodian_versions_on_item_type_and_item_id', 'domain_custodian_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_flows_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_flows_aclv_user_id', 'data_flows_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_flows_aclv_org_id', 'data_flows_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_flows_aclv_item_type_item_id', 'data_flows_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('marketplace_item_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_marketplace_item_versions_on_user_id', 'marketplace_item_versions', ['user_id'], unique=False)
    op.create_index('index_marketplace_item_versions_on_org_id', 'marketplace_item_versions', ['org_id'], unique=False)
    op.create_index('index_marketplace_item_versions_on_item_type_and_item_id', 'marketplace_item_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('user_login_audits',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('time_of_issue', mysql.DATETIME(), nullable=True),
    sa.Column('time_of_invalidation', mysql.DATETIME(), nullable=True),
    sa.Column('time_of_expiration', mysql.DATETIME(), nullable=True),
    sa.Column('token_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=50), nullable=False),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('audit_type', mysql.ENUM('login', 'logout'), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_dd829c19a2'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_rails_239b3ac868'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_user_login_audits_on_user_id', 'user_login_audits', ['user_id'], unique=False)
    op.create_index('index_user_login_audits_on_org_id', 'user_login_audits', ['org_id'], unique=False)
    op.create_table('data_schema_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_schema_versions_on_user_id', 'data_schema_versions', ['user_id'], unique=False)
    op.create_index('index_data_schema_versions_on_org_id', 'data_schema_versions', ['org_id'], unique=False)
    op.create_index('index_data_schema_versions_on_item_type_and_item_id', 'data_schema_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_flows_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_21f655d5e4', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['data_sink_id'], ['data_sinks.id'], name='fk_rails_519cbd3f7c', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_5795eb77be', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_flows_access_controls_accessor_role', 'data_flows_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('data_credentials_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_c1aa79f232', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_credentials_access_controls_on_data_credentials_id', 'data_credentials_access_controls', ['data_credentials_id'], unique=False)
    op.create_index('idx_data_credentials_access_controls_accessor_role', 'data_credentials_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_index('data_credentials_acl_accessor_id_type_roles', 'data_credentials_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_table('projects_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('project_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_d9a146f2e9'),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], name='fk_rails_465ea7f1d9'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_projects_doc_containers_on_project_id', 'projects_doc_containers', ['project_id'], unique=False)
    op.create_index('index_projects_doc_containers_on_doc_container_id', 'projects_doc_containers', ['doc_container_id'], unique=False)
    op.create_table('projects_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_projects_aclv_user_id', 'projects_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_projects_aclv_org_id', 'projects_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_projects_aclv_item_type_item_id', 'projects_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('self_signup_blocked_domains',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('domain', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('flow_links',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('status', mysql.ENUM('ACTIVE', 'PAUSED'), server_default=sa.text("'ACTIVE'"), nullable=False),
    sa.Column('link_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('left_origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('right_origin_node_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('retriever_data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['left_origin_node_id'], ['flow_nodes.id'], name='fk_rails_688d8ce72b'),
    sa.ForeignKeyConstraint(['link_type'], ['flow_link_types.type'], name='fk_rails_afb01c7e8d'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_51a38c3ba9'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_61edb03abf'),
    sa.ForeignKeyConstraint(['retriever_data_set_id'], ['data_sets.id'], name='fk_rails_0d1bc2f718'),
    sa.ForeignKeyConstraint(['right_origin_node_id'], ['flow_nodes.id'], name='fk_rails_b872cb3e2d'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_links_on_right_origin_node_id', 'flow_links', ['right_origin_node_id'], unique=False)
    op.create_index('index_flow_links_on_retriever_data_set_id', 'flow_links', ['retriever_data_set_id'], unique=False)
    op.create_index('index_flow_links_on_owner_id', 'flow_links', ['owner_id'], unique=False)
    op.create_index('index_flow_links_on_link_type', 'flow_links', ['link_type'], unique=False)
    op.create_index('index_flow_links_on_left_origin_node_id', 'flow_links', ['left_origin_node_id'], unique=False)
    op.create_table('vendors_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('vendor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_f0e6445934'),
    sa.ForeignKeyConstraint(['vendor_id'], ['vendors.id'], name='fk_rails_fecb375ad5'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_vendors_doc_containers_on_vendor_id', 'vendors_doc_containers', ['vendor_id'], unique=False)
    op.create_index('index_vendors_doc_containers_on_doc_container_id', 'vendors_doc_containers', ['doc_container_id'], unique=False)
    op.create_table('catalog_config_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_catalog_config_versions_on_user_id', 'catalog_config_versions', ['user_id'], unique=False)
    op.create_index('index_catalog_config_versions_on_org_id', 'catalog_config_versions', ['org_id'], unique=False)
    op.create_index('index_catalog_config_versions_on_item_type_and_item_id', 'catalog_config_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_sources_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_2af88dad25'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_db1af5f7a9'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sources_doc_containers_on_doc_container_id', 'data_sources_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_data_sources_doc_containers_on_data_source_id', 'data_sources_doc_containers', ['data_source_id'], unique=False)
    op.create_table('cluster_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_cluster_versions_on_user_id', 'cluster_versions', ['user_id'], unique=False)
    op.create_index('index_cluster_versions_on_org_id', 'cluster_versions', ['org_id'], unique=False)
    op.create_index('index_cluster_versions_on_item_type_and_item_id', 'cluster_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('project_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_project_versions_on_user_id', 'project_versions', ['user_id'], unique=False)
    op.create_index('index_project_versions_on_org_id', 'project_versions', ['org_id'], unique=False)
    op.create_index('index_project_versions_on_item_type_and_item_id', 'project_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('endpoint_mappings',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('method', mysql.ENUM('GET', 'POST', 'PUT', 'PATCH', 'DELETE'), server_default=sa.text("'GET'"), nullable=False),
    sa.Column('route', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_c5b7a277db', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_df2b8a18fd', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_endpoint_mappings_on_name', 'endpoint_mappings', ['name'], unique=False)
    op.create_index('index_endpoint_mappings_on_data_source_id', 'endpoint_mappings', ['data_source_id'], unique=False)
    op.create_index('index_endpoint_mappings_on_data_set_id', 'endpoint_mappings', ['data_set_id'], unique=False)
    op.create_table('flow_link_types',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_link_types_on_type', 'flow_link_types', ['type'], unique=False)
    op.create_table('org_custodians',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('status', mysql.ENUM('active', 'deactivated'), server_default=sa.text("'active'"), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_f55f44edd7'),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], name='fk_rails_15b8b7e7c7'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_org_custodians_on_user_id', 'org_custodians', ['user_id'], unique=False)
    op.create_index('index_org_custodians_on_org_id', 'org_custodians', ['org_id'], unique=False)
    op.create_table('team_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_team_versions_on_user_id', 'team_versions', ['user_id'], unique=False)
    op.create_index('index_team_versions_on_org_id', 'team_versions', ['org_id'], unique=False)
    op.create_index('index_team_versions_on_item_type_and_item_id', 'team_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_sets_parent_data_sets',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('parent_data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_b9f6400ef8', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['parent_data_set_id'], ['data_sets.id'], name='fk_rails_99e2b95c9e', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_parent_data_sets_on_data_set_id', 'data_sets_parent_data_sets', ['data_set_id'], unique=False)
    op.create_table('data_source_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('item_id_created_at', 'data_source_versions', ['item_id', 'created_at'], unique=False)
    op.create_index('index_data_source_versions_on_user_id', 'data_source_versions', ['user_id'], unique=False)
    op.create_index('index_data_source_versions_on_org_id', 'data_source_versions', ['org_id'], unique=False)
    op.create_index('index_data_source_versions_on_item_type_and_item_id', 'data_source_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('org_additional_infos',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('self_signup_request_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_org_additional_infos_on_self_signup_request_id', 'org_additional_infos', ['self_signup_request_id'], unique=False)
    op.create_index('index_org_additional_infos_on_org_id', 'org_additional_infos', ['org_id'], unique=False)
    op.create_table('code_filters',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('scope', mysql.ENUM('all', 'org'), server_default=sa.text("'all'"), nullable=False),
    sa.Column('code_type', mysql.ENUM('jolt_standard', 'jolt_custom', 'python', 'python3', 'javascript', 'javascript_es6', 'flink_sql', 'spark_sql', 'config', 'all'), nullable=False),
    sa.Column('pattern', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_code_filters_on_owner_id', 'code_filters', ['owner_id'], unique=False)
    op.create_index('index_code_filters_on_code_type', 'code_filters', ['code_type'], unique=False)
    op.create_table('data_schemas_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_schema_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_schema_id'], ['data_schemas.id'], name='fk_rails_b0c9545c59'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_507c63c03f'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_schemas_doc_containers_on_doc_container_id', 'data_schemas_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_data_schemas_doc_containers_on_data_schema_id', 'data_schemas_doc_containers', ['data_schema_id'], unique=False)
    op.create_table('data_sources_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_507207e203', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sources_access_controls_on_data_source_id', 'data_sources_access_controls', ['data_source_id'], unique=False)
    op.create_index('idx_data_sources_access_controls_accessor_role', 'data_sources_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_index('data_sources_acl_accessor_id_type_roles', 'data_sources_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_table('data_schemas_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_schemas_aclv_user_id', 'data_schemas_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_schemas_aclv_org_id', 'data_schemas_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_schemas_aclv_item_type_item_id', 'data_schemas_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notifications_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('notification_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['notification_id'], ['notifications.id'], name='fk_rails_5a64520a7d', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_notifications_access_controls_on_notification_id', 'notifications_access_controls', ['notification_id'], unique=False)
    op.create_index('idx_notifications_access_controls_accessor_role', 'notifications_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('data_sinks_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_sink_id'], ['data_sinks.id'], name='fk_rails_40033ab752'),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_1641b13ce2'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sinks_doc_containers_on_doc_container_id', 'data_sinks_doc_containers', ['doc_container_id'], unique=False)
    op.create_index('index_data_sinks_doc_containers_on_data_sink_id', 'data_sinks_doc_containers', ['data_sink_id'], unique=False)
    op.create_table('user_settings_types',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('primary_key', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_user_settings_types_on_name', 'user_settings_types', ['name'], unique=False)
    op.create_table('flow_node_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_node_versions_on_user_id', 'flow_node_versions', ['user_id'], unique=False)
    op.create_index('index_flow_node_versions_on_org_id', 'flow_node_versions', ['org_id'], unique=False)
    op.create_index('index_flow_node_versions_on_item_type_and_item_id', 'flow_node_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('vendor_endpoint_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_vendor_endpoint_versions_on_user_id', 'vendor_endpoint_versions', ['user_id'], unique=False)
    op.create_index('index_vendor_endpoint_versions_on_org_id', 'vendor_endpoint_versions', ['org_id'], unique=False)
    op.create_index('index_vendor_endpoint_versions_on_item_type_and_item_id', 'vendor_endpoint_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_credentials_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('item_id_created_at', 'data_credentials_versions', ['item_id', 'created_at'], unique=False)
    op.create_index('index_data_credentials_versions_on_user_id', 'data_credentials_versions', ['user_id'], unique=False)
    op.create_index('index_data_credentials_versions_on_org_id', 'data_credentials_versions', ['org_id'], unique=False)
    op.create_index('index_data_credentials_versions_on_item_type_and_item_id', 'data_credentials_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('custom_data_flows',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('flow_type', mysql.ENUM('airflow'), server_default=sa.text("'airflow'"), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE', 'RATE_LIMITED'), server_default=sa.text("'INIT'"), nullable=True),
    sa.Column('managed', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=False),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('copied_from_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_674d0a8141', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_5564d4ef66', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_custom_data_flows_on_owner_id', 'custom_data_flows', ['owner_id'], unique=False)
    op.create_table('flow_link_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_flow_link_versions_on_user_id', 'flow_link_versions', ['user_id'], unique=False)
    op.create_index('index_flow_link_versions_on_org_id', 'flow_link_versions', ['org_id'], unique=False)
    op.create_index('idx_flow_link_versions_item_type_item_id', 'flow_link_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_credentials_groups',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('credentials_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_28602af945', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_b3983a5c23', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_credentials_groups_on_owner_id', 'data_credentials_groups', ['owner_id'], unique=False)
    op.create_index('index_data_credentials_groups_on_org_id', 'data_credentials_groups', ['org_id'], unique=False)
    op.create_index('index_data_credentials_groups_on_name', 'data_credentials_groups', ['name'], unique=False)
    op.create_table('tags',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('taggings_count', mysql.INTEGER(), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_tags_on_name', 'tags', ['name'], unique=True)
    op.create_table('data_sinks_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_sink_id'], ['data_sinks.id'], name='fk_rails_75b194d89e', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sinks_access_controls_on_data_sink_id', 'data_sinks_access_controls', ['data_sink_id'], unique=False)
    op.create_index('idx_data_sinks_access_controls_accessor_role', 'data_sinks_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_index('data_sinks_acl_accessor_id_type_roles', 'data_sinks_access_controls', ['accessor_id', 'accessor_type', 'access_roles'], unique=False)
    op.create_table('auth_parameter_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_auth_parameter_versions_on_user_id', 'auth_parameter_versions', ['user_id'], unique=False)
    op.create_index('index_auth_parameter_versions_on_org_id', 'auth_parameter_versions', ['org_id'], unique=False)
    op.create_index('index_auth_parameter_versions_on_item_type_and_item_id', 'auth_parameter_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('marketplace_items',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('status', mysql.ENUM('draft', 'active', 'discontinued'), server_default=sa.text("'draft'"), nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_bf9705cd4c'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_versions_on_user_id', 'versions', ['user_id'], unique=False)
    op.create_index('index_versions_on_org_id', 'versions', ['org_id'], unique=False)
    op.create_index('index_versions_on_item_type_and_item_id', 'versions', ['item_type', 'item_id'], unique=False)
    op.create_table('quarantine_settings_access_controls',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('quarantine_setting_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('accessor_type', mysql.ENUM('USER', 'TEAM', 'ORG'), server_default=sa.text("'USER'"), nullable=False),
    sa.Column('accessor_org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('role_index', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('access_roles', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('expires_at', mysql.DATETIME(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['accessor_org_id'], ['orgs.id'], name='fk_rails_79cb7d7ce5', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['quarantine_setting_id'], ['quarantine_settings.id'], name='fk_rails_96214d888f', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_quarantine_settings_access_controls_accessor_role', 'quarantine_settings_access_controls', ['accessor_id', 'accessor_type', 'role_index'], unique=False)
    op.create_table('self_signup_request_versions',
    sa.Column('id', mysql.BIGINT(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_self_signup_request_versions_on_user_id', 'self_signup_request_versions', ['user_id'], unique=False)
    op.create_index('index_self_signup_request_versions_on_org_id', 'self_signup_request_versions', ['org_id'], unique=False)
    op.create_index('index_self_signup_request_versions_on_item_type_and_item_id', 'self_signup_request_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('notification_types',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('code', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('category', mysql.ENUM('PLATFORM', 'SYSTEM', 'DATA'), nullable=True),
    sa.Column('default', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('status', mysql.TINYINT(display_width=1), server_default=sa.text("'0'"), autoincrement=False, nullable=True),
    sa.Column('visible', mysql.TINYINT(display_width=1), server_default=sa.text("'1'"), autoincrement=False, nullable=True),
    sa.Column('event_type', mysql.ENUM('SHARE', 'CREATE', 'DELETE', 'UPDATE', 'ACTIVATE', 'PAUSE', 'METRICS', 'RESETPASS', 'ERROR_AGGREGATED', 'ERROR', 'MONITOR', 'WRITE', 'EMPTY_DATA', 'READ_START', 'READ_DONE', 'WRITE_START', 'WRITE_DONE', 'UPDATE_ACL'), nullable=True),
    sa.Column('resource_type', mysql.ENUM('CUSTOM_DATA_FLOW', 'DATA_FLOW', 'DATASET', 'PUB', 'SINK', 'SOURCE', 'SUB', 'RESOURCE', 'CATALOG_CONFIG', 'APPROVAL_STEP'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_table('orgs_doc_containers',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('doc_container_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['doc_container_id'], ['doc_containers.id'], name='fk_rails_a35948cd51'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_b32c1ee673'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_orgs_doc_containers_on_org_id', 'orgs_doc_containers', ['org_id'], unique=False)
    op.create_index('index_orgs_doc_containers_on_doc_container_id', 'orgs_doc_containers', ['doc_container_id'], unique=False)
    op.create_table('teams',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_d539eaab01', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_e62f95aa33', onupdate='RESTRICT', ondelete='RESTRICT'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_teams_on_owner_id', 'teams', ['owner_id'], unique=False)
    op.create_table('catalog_configs',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('status', mysql.ENUM('INIT', 'PAUSED', 'ACTIVE'), server_default=sa.text("'ACTIVE'"), nullable=True),
    sa.Column('job_id', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('mode', mysql.ENUM('auto', 'manual'), nullable=True),
    sa.Column('config', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('templates', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.Column('schedule_time', mysql.TINYINT(), autoincrement=False, nullable=True),
    sa.ForeignKeyConstraint(['data_credentials_id'], ['data_credentials.id'], name='fk_rails_e7604f4b6a'),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_2ee73dcf2a'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_d8ea348e0b'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_catalog_configs_on_owner_id', 'catalog_configs', ['owner_id'], unique=False)
    op.create_index('index_catalog_configs_on_org_id', 'catalog_configs', ['org_id'], unique=False)
    op.create_table('data_sources_run_ids',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('run_id', mysql.BIGINT(), autoincrement=False, nullable=True),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_79b5474709', ondelete='CASCADE'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sources_run_ids_on_data_source_id', 'data_sources_run_ids', ['data_source_id'], unique=False)
    op.create_index('idx_data_sources_run_ids_data_source_id_created_at', 'data_sources_run_ids', ['data_source_id', 'created_at'], unique=False)
    op.create_index('idx_data_sources_run_ids_created_at', 'data_sources_run_ids', ['created_at'], unique=False)
    op.create_table('data_sinks_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('idx_data_sinks_aclv_user_id', 'data_sinks_access_control_versions', ['user_id'], unique=False)
    op.create_index('idx_data_sinks_aclv_org_id', 'data_sinks_access_control_versions', ['org_id'], unique=False)
    op.create_index('idx_data_sinks_aclv_item_type_item_id', 'data_sinks_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('runtimes',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('name', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('description', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('active', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('dockerpath', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('data_credentials_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('managed', mysql.TINYINT(display_width=1), autoincrement=False, nullable=True),
    sa.Column('config', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.ForeignKeyConstraint(['org_id'], ['orgs.id'], name='fk_rails_324dd90b77'),
    sa.ForeignKeyConstraint(['owner_id'], ['users.id'], name='fk_rails_1dbf2c9f0f'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_runtimes_on_owner_id', 'runtimes', ['owner_id'], unique=False)
    op.create_table('projects_data_flows',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('project_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_source_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('data_sink_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['data_set_id'], ['data_sets.id'], name='fk_rails_a4a4fda500'),
    sa.ForeignKeyConstraint(['data_sink_id'], ['data_sinks.id'], name='fk_rails_8d53598e94'),
    sa.ForeignKeyConstraint(['data_source_id'], ['data_sources.id'], name='fk_rails_1bd69c7f8e'),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], name='fk_rails_535855a790'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_0900_ai_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_projects_data_flows_on_project_id', 'projects_data_flows', ['project_id'], unique=False)
    op.create_table('data_sink_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('item_id_created_at', 'data_sink_versions', ['item_id', 'created_at'], unique=False)
    op.create_index('index_data_sink_versions_on_user_id', 'data_sink_versions', ['user_id'], unique=False)
    op.create_index('index_data_sink_versions_on_org_id', 'data_sink_versions', ['org_id'], unique=False)
    op.create_index('index_data_sink_versions_on_item_type_and_item_id', 'data_sink_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('cluster_endpoints',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('cluster_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('service', mysql.ENUM('aws', 'control', 'data_characteristic', 'data_ingestion', 'data_sync', 'elasticsearch', 'file_upload', 'flows_dashboard', 'listing', 'metrics', 'metrics_aggregation', 'notification', 'probe', 'redis', 'sample', 'transform', 'monitor', 'flow_execution', 'catalog_plugins', 'genai_fusion', 'script', 'script_sink', 'script_source', 'cubejs', 'ai_web', 'quarantine_aggregation'), nullable=True),
    sa.Column('protocol', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), server_default=sa.text("'http'"), nullable=True),
    sa.Column('host', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('port', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('context', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('header_host', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('created_at', mysql.DATETIME(), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(), nullable=False),
    sa.ForeignKeyConstraint(['cluster_id'], ['clusters.id'], name='fk_rails_2abc198071'),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_cluster_endpoints_on_service_and_cluster_id', 'cluster_endpoints', ['service', 'cluster_id'], unique=True)
    op.create_index('index_cluster_endpoints_on_cluster_id', 'cluster_endpoints', ['cluster_id'], unique=False)
    op.create_table('invites',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('invitee_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('uid', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('created_by_user_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_invites_on_uid', 'invites', ['uid'], unique=False)
    op.create_table('data_sets_access_control_versions',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('item_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=191), nullable=False),
    sa.Column('item_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('event', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=False),
    sa.Column('whodunnit', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('user_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('user_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('impersonator_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('owner_email', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_ip', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_user_agent', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('request_url', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('association_resource', mysql.TEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('resource_type', mysql.VARCHAR(charset='utf8mb4', collation='utf8mb4_unicode_ci', length=255), nullable=True),
    sa.Column('resource_id', mysql.INTEGER(), autoincrement=False, nullable=True),
    sa.Column('object_changes', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('object', mysql.LONGTEXT(charset='utf8mb4', collation='utf8mb4_unicode_ci'), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=True),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_sets_access_control_versions_on_user_id', 'data_sets_access_control_versions', ['user_id'], unique=False)
    op.create_index('index_data_sets_access_control_versions_on_org_id', 'data_sets_access_control_versions', ['org_id'], unique=False)
    op.create_index('index_data_sets_access_control_versions_on_item_type_and_item_id', 'data_sets_access_control_versions', ['item_type', 'item_id'], unique=False)
    op.create_table('data_samples',
    sa.Column('id', mysql.INTEGER(), autoincrement=True, nullable=False),
    sa.Column('owner_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('org_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('data_set_id', mysql.INTEGER(), autoincrement=False, nullable=False),
    sa.Column('samples', mysql.JSON(), nullable=True),
    sa.Column('created_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.Column('updated_at', mysql.DATETIME(fsp=6), nullable=False),
    sa.PrimaryKeyConstraint('id'),
    mysql_collate='utf8mb4_unicode_ci',
    mysql_default_charset='utf8mb4',
    mysql_engine='InnoDB'
    )
    op.create_index('index_data_samples_on_owner_id', 'data_samples', ['owner_id'], unique=False)
    op.create_index('index_data_samples_on_org_id_and_owner_id', 'data_samples', ['org_id', 'owner_id'], unique=False)
    op.create_index('index_data_samples_on_data_set_id', 'data_samples', ['data_set_id'], unique=False)
    # ### end Alembic commands ###